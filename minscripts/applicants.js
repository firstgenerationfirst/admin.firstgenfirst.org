"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,i,s=[],r=!0,l=!1;try{for(a=a.call(e);!(r=(n=a.next()).done)&&(s.push(n.value),!t||s.length!==t);r=!0);}catch(e){l=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(l)throw i}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(a){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(a);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _createForOfIteratorHelper(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){r=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(r)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(a="Object"===a&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}!function(){var e,Z=window.applicant_spreadsheets,m=Z.MISSING_FIELD,W=Z.Enum.NA,r=["applicant","finalist","recipient","ineligible"],s={},t=_createForOfIteratorHelper(document.cookie.split("; "));try{for(t.s();!(e=t.n()).done;){var a=_slicedToArray(e.value.split("="),2),n=a[0],i=a[1];s[decodeURIComponent(n)]=decodeURIComponent(i)}}catch(e){t.e(e)}finally{t.f()}var q=[];user.readProfile.then(function(e){q=e.roles});var l=firebase.firestore().collection("applicant_submissions").doc("voting_metadata");function o(e,t){return isNaN(e)?e:e%1e3==0&&0!=e?(t||"")+(e/1e3).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+"k":(t||"")+e.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")}function c(e){return o(e,"$")}function j(e){return e.trim().replace(/\s+/g," ").toLocaleLowerCase(navigator.language).replace(/([^0-9A-Za-zÀ-ÖØ-öø-ÿ]+(?!(?:the|a|an|and|but|or|for|nor|as|if|in|on|of)\b)|^|[^0-9A-Za-zÀ-ÖØ-öø-ÿ]](?=[0-9A-Za-zÀ-ÖØ-öø-ÿ]+$))([0-9A-Za-zÀ-ÖØ-öø-ÿ])/g,function(e,t,a){return t+a.toLocaleUpperCase(navigator.language)})}function u(t){return function(e){return e==W?"N/A":t(e)}}var d,p={alabama:"AL",alaska:"AK",arizona:"AZ",arkansas:"AR",california:"CA",colorado:"CO",connecticut:"CT",delaware:"DE",florida:"FL",georgia:"GA",hawaii:"HI",idaho:"ID",illinois:"IL",indiana:"IN",iowa:"IA",kansas:"KS",kentucky:"KY",louisiana:"LA",maine:"ME",maryland:"MD",massachusetts:"MA",michigan:"MI",minnesota:"MN",mississippi:"MS",missouri:"MO",montana:"MT",nebraska:"NE",nevada:"NV","new hampshire":"NH","new jersey":"NJ","new mexico":"NM","new york":"NY","north carolina":"NC","north dakota":"ND",ohio:"OH",oklahoma:"OK",oregon:"OR",pennsylvania:"PA","rhode island":"RI","south carolina":"SC","south dakota":"SD",tennessee:"TN",texas:"TX",utah:"UT",vermont:"VT",virginia:"VA",washington:"WA","west virginia":"WV",wisconsin:"WI",wyoming:"WY"},h=Object.values(p),g=new RegExp("^(.+?)(?:(?:,\\s*|\\s+)(".concat(Object.keys(p).join("|"),"))?$")),K={First:u(j),Last:u(j),Email:u(function(e){return e.toLocaleLowerCase(navigator.language)}),Status:u(function(e){var t={};return _defineProperty(t,Z.Enum.STATUS.APPLICANT,"Applicant"),_defineProperty(t,Z.Enum.STATUS.FINALIST,"Finalist"),_defineProperty(t,Z.Enum.STATUS.RECIPIENT,"Recipient"),_defineProperty(t,Z.Enum.STATUS.INELIGIBLE,"Ineligible"),t[e]||"N/A"}),Income:u(function(e){return Array.isArray(e)?"Infinity"==e[1]?"".concat(c(e[0]),"+"):"".concat(c(e[0]),"–").concat(c(e[1])):c(e)}),Members:u(o),EFC:u(c),College:u(function(e){return e=({Stanford:"Stanford University","Uc Los Angeles":"UCLA",Ucsd:"UC San Diego",Ucsb:"UC Santa Barbara",Ucsc:"UC Santa Cruz",Ucr:"UC Riverside",Ucm:"UC Merced",Ucd:"UC Davis",Ucb:"UC Berkeley",Berkeley:"UC Berkeley",Uci:"UC Irvine",Csun:"CSU Northridge","Rio Hondo":"Rio Hondo College",Ivc:"Irvine Valley College",Lbcc:"Long Beach City College",Iupui:"Indiana University–Purdue University Indianapolis"}[e=j(e).replace(/\bU\b/,"University")]||e).replace(/\b(?:uc|ucla|csu|su|cn|cc|usc|iupui|ca|suny)\b/gi,function(e){return e.toLocaleUpperCase(navigator.language)})}),Loans:u(function(e){var t={};return _defineProperty(t,Z.Enum.LOANS.YES,"Yes"),_defineProperty(t,Z.Enum.LOANS.NO,"No"),_defineProperty(t,Z.Enum.LOANS.UNCERTAIN,"N/A"),t[e]||"N/A"}),Campus_Living:u(function(e){var t={};return _defineProperty(t,Z.Enum.CAMPUS_LIVING.ON_CAMPUS,"On campus"),_defineProperty(t,Z.Enum.CAMPUS_LIVING.OFF_CAMPUS_RENT,"Off campus w/ rent"),_defineProperty(t,Z.Enum.CAMPUS_LIVING.OFF_CAMPUS_NO_RENT,"Off campus w/o rent"),_defineProperty(t,Z.Enum.CAMPUS_LIVING.UNCERTAIN,"Unknown"),t[e]||"N/A"}),Location:u(function(e){if("washington dc"==(e=e.toLowerCase().trim()).replace(/[^a-z\d\s]/g,""))return"Washington, DC";if(h.includes(e.substring(e.length-2).toUpperCase())&&e.substring(0,e.length-2).trim().length!=e.length-2){var t=e.substring(e.length-2);return","!=(e=e.substring(0,e.length-2).trim())[e.length-1]&&(e+=","),j(e)+" "+t.toUpperCase()}return e.replace(g,function(e,t,a){return j(t)+(a?", "+p[a]:"")})}),Year:u(function(e){var t={};return _defineProperty(t,Z.Enum.YEAR.HIGH_SCHOOL,"High school student"),_defineProperty(t,Z.Enum.YEAR.FIRST_YEAR,"First year college student"),_defineProperty(t,Z.Enum.YEAR.COLLEGE,"Returning college student"),_defineProperty(t,Z.Enum.YEAR.GRADUATE,"Graduate student"),_defineProperty(t,Z.Enum.YEAR.TRANSFER,"Transfer student"),t[e]||"N/A"}),Parent1_Education:u(function(e){var t={};return _defineProperty(t,Z.Enum.PARENT1_EDUCATION.NO_DIPLOMA,"No diploma"),_defineProperty(t,Z.Enum.PARENT1_EDUCATION.DIPLOMA,"HS diploma or equivalent"),_defineProperty(t,Z.Enum.PARENT1_EDUCATION.SOME_COLLEGE,"Some college"),_defineProperty(t,Z.Enum.PARENT1_EDUCATION.DEGREE,"College degree"),_defineProperty(t,Z.Enum.PARENT1_EDUCATION.MULTIPLE_DEGREES,"Multiple degrees"),_defineProperty(t,Z.Enum.PARENT1_EDUCATION.NO_PARENT,"No parent 1"),t[e]||"N/A"}),Parent2_Education:u(function(e){var t={};return _defineProperty(t,Z.Enum.PARENT2_EDUCATION.NO_DIPLOMA,"No diploma"),_defineProperty(t,Z.Enum.PARENT2_EDUCATION.DIPLOMA,"HS diploma or equivalent"),_defineProperty(t,Z.Enum.PARENT2_EDUCATION.SOME_COLLEGE,"Some college"),_defineProperty(t,Z.Enum.PARENT2_EDUCATION.DEGREE,"College degree"),_defineProperty(t,Z.Enum.PARENT2_EDUCATION.MULTIPLE_DEGREES,"Multiple degrees"),_defineProperty(t,Z.Enum.PARENT2_EDUCATION.NO_PARENT,"No parent 2"),t[e]||"N/A"}),Phone:u(function(e){return 12==(e=e.replace(/[^\d\+]+/g,"")).length&&"+1"==e.substring(0,2)?e=e.substring(2):11==e.length&&"1"==e.substring[0]&&(e=e.substring(1)),10!=e.length||isNaN(e)?"N/A":"(".concat(e.substring(0,3),") ").concat(e.substring(3,6),"-").concat(e.substring(6,10))}),Birthday:u(function(e){return!isNaN(e.valueOf())&&e<new Date?"".concat(["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."][e.getMonth()]," ").concat(e.getDate(),", ").concat(e.getFullYear()):"N/A"}),Pronouns:u(function(e){return e.split("/").map(function(e){return j(e.trim())}).join("/")})},E=function(){_inherits(i,React.Component);var n=_createSuper(i);function i(e){_classCallCheck(this,i);var t=n.call(this,e),a=(new Date).getFullYear(),e=e.years.filter(function(e){return e-a<=0}).reverse()[0];return t.state={spreadsheetData:null,loadedYears:{},selectedYear:e,loading:!0,compactMode:"true"==s["applicants-compact_mode"],votingMode:!1,unbiasedMode:"true"==s["applicants-unbiased_mode"],detailOption:s["applicants-details"]||"Icons",searchQuery:"",isFocusing:!1,applicantFocus:null,showSettings:!1,searchFilters:{status:r,statusIsActive:!1,id:null,idIsActive:!1,words:[],wordsIsActive:!1},error:null},user.readProfile.then(function(e){e.roles.includes("applicant_voter")&&l.onSnapshot(function(e){e=e.data().voting_mode;e!=this.state.votingMode&&this.onToggleVoting(e,!0)}.bind(this))}.bind(_assertThisInitialized(t))),document.addEventListener("click",function(){this.onToggleSettingVisibility.call(this,!1)}.bind(_assertThisInitialized(t))),t}return _createClass(i,[{key:"render",value:function(){var e,t;return this.state.applicantFocus&&(e=(t=_slicedToArray(this.state.applicantFocus.split("-"),2))[0],t=t[1],e=+e+2e3,t=parseInt(t,16)),React.createElement(React.Fragment,null,React.createElement(f,{searchQuery:this.state.searchQuery,selectedYear:this.state.selectedYear,years:this.props.years,onSearchQueryChange:this.onSearchQueryChange.bind(this),votingMode:this.state.votingMode,unbiasedMode:this.state.unbiasedMode,detailOption:this.state.detailOption,showSettings:this.state.showSettings,onYearChange:this.onYearChange.bind(this),onToggleSettingVisibility:this.onToggleSettingVisibility.bind(this),onToggleVoting:this.onToggleVoting.bind(this),onToggleUnbiased:this.onToggleUnbiased.bind(this),onChangeDetail:this.onChangeDetail.bind(this)}),React.createElement(R,{year:this.state.selectedYear,searchFilters:this.state.searchFilters,spreadsheetData:this.state.spreadsheetData,loading:this.state.loading,error:this.state.error,compactMode:this.state.compactMode,unbiasedMode:this.state.unbiasedMode,detailOption:this.state.detailOption,onFocusApplicant:this.onFocusApplicant.bind(this)}),React.createElement(y,{spreadsheetData:this.state.spreadsheetData,active:this.state.isFocusing,applicant:this.state.applicantFocus,year:e,id:t,unbiasedMode:this.state.unbiasedMode,onUnfocus:this.onUnfocus.bind(this)}))}},{key:"onSearchQueryChange",value:function(e){var t={};this.setState({searchQuery:e}),"s"==(e=e.toLowerCase().trim())[e.length-1]&&r.includes(e.substring(0,e.length-1))?e="status:"+e.substring(0,e.length-1):r.includes(e)&&(e="status:"+e);var a=e.match(/(?:\s+|^)status\s*[:=]\s*([a-z]+)(?=\s+|$)/);a?(e=e.substring(0,a.index)+e.substring(a.index+a[0].length),t.status=r.filter(function(e){return 0==e.indexOf(a[1])}),t.statusIsActive=!0):(t.status=r,t.statusIsActive=!1);var n,i,s=e.match(/(?:\s+|^)(?:#?(\d+)\s*-\s*([a-f\d]*)|#([a-f\d]+)|([a-f\d]*\d[a-f\d]*))(?=\s+|$)/);s?(e=e.substring(0,s.index)+e.substring(s.index+s[0].length),"string"==typeof s[4]?(n=this.state.selectedYear,i=parseInt(s[4],16)):"string"==typeof s[3]?(n=this.state.selectedYear,i=parseInt(s[3],16)):"string"==typeof s[1]&&"string"==typeof s[2]&&(n=+s[1],i=parseInt(s[2],16)),n<2e3&&(n+=2e3),isNaN(i)?(t.id=null,t.idIsActive=!1):(t.id=i,t.idIsActive=!0),this.state.selectedYear!=n&&this.onYearChange(n)):(t.id=null,t.idIsActive=!1),(e=e.trim()).length?(e=e.split(/\s+/).filter(function(e){return 1<e.length}),t.words=e,t.wordsIsActive=!!e.length):(t.words=[],t.wordsIsActive=!1),this.setState({searchFilters:t})}},{key:"onYearChange",value:function(h,t,a){function e(e){this.setState({spreadsheetData:e,error:null,loading:!1}),t(e)}function n(e){"PERMISSION_DENIED"==e.result.error.status?this.setState({error:React.createElement(React.Fragment,null,"Your account does not have viewing permission for this year's Google Sheet. Try viewing the spreadsheet using the button below, and request permission.",React.createElement("a",{href:"https://docs.google.com/spreadsheets/d/".concat(Z[h].id,"/view"),id:"open_spreadsheet",className:"button",target:"_blank"},"View Spreadsheet")),loading:!1}):(this.setState({error:"There was an unknown problem getting this year's applicant data.",loading:!1}),a(e))}h in Z&&(t="function"==typeof t?t:function(){},a="function"==typeof a?a:function(){},this.setState({selectedYear:+h,loading:!0}),h in this.state.loadedYears?this.state.loadedYears[h].loaded?e.call(this,this.state.loadedYears[h].data):n.call(this,this.state.loadedYears[h].error):new Promise(function(p,t){gapiLoaded.then(function(){return gapi.client.sheets.spreadsheets.values.get({spreadsheetId:Z[h].id,range:Z[h].sheet}).then(function(e){var t=e.result.values,n=t.shift();function a(e){var t=e in Z[h].mapping?Z[h].mapping[e]:e,a=n.indexOf(t);if(t!=m&&~a)return a;throw new RangeError('No column with name "'.concat(e,'".'))}var i,s=Z[h].translate.from;for(i in s){var r,l=a(i),o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;){var c=r.value;c[l]=s[i](c[l].trim())}}catch(e){o.e(e)}finally{o.f()}}for(var u=t.length-1;0<=u;u--){var d=n.length-t[u].length;d&&(t[u]=t[u].concat(new Array(d).fill("")))}e={c:a,c_ID:a("ID"),c_First:a("First"),c_Last:a("Last"),c_Status:a("Status"),headers:n,rows:t};this.state.loadedYears[h]={loaded:!0,data:e},p(e)}.bind(this),function(e){this.state.loadedYears[h]={loaded:!1,error:e},t(e)}.bind(this))}.bind(this))}.bind(this)).then(e.bind(this),n.bind(this)))}},{key:"onFocusApplicant",value:function(e){var t=+e.split("-")[0]+2e3;isNaN(t)||this.onYearChange(t,function(){this.setState({isFocusing:!0,applicantFocus:e})}.bind(this))}},{key:"onUnfocus",value:function(){this.setState({isFocusing:!1,applicantFocus:null})}},{key:"onToggleSettingVisibility",value:function(e){this.setState({showSettings:e})}},{key:"onToggleVoting",value:function(e,t){this.setState({votingMode:e,unbiasedMode:e},function(){this.onSearchQueryChange(this.state.searchQuery)}.bind(this)),t||l.update({voting_mode:e})}},{key:"onToggleUnbiased",value:function(e){var t=new Date;t.setFullYear(t.getFullYear()+2),document.cookie="applicants-unbiased_mode=".concat(e,";expires=").concat(t.toUTCString()),this.setState({unbiasedMode:e},function(){this.onSearchQueryChange(this.state.searchQuery)}.bind(this))}},{key:"onChangeDetail",value:function(e){var t=new Date;t.setFullYear(t.getFullYear()+2),document.cookie="applicants-details=".concat(e,";expires=").concat(t.toUTCString()),this.setState({detailOption:e})}}]),i}(),f=function(){_inherits(n,React.Component);var a=_createSuper(n);function n(e){_classCallCheck(this,n);for(var t=e.years.length-1;0<=t;t--)e.years[t]=React.createElement("option",{key:e.years[t]},e.years[t]);return a.call(this,e)}return _createClass(n,[{key:"componentDidMount",value:function(){this.onYearChange(this.props.selectedYear)}},{key:"render",value:function(){var e,t=this;return React.createElement("div",{id:"search_bar"},React.createElement("input",{value:this.props.searchQuery,placeholder:"Search Applicants",onChange:function(e){return t.onSearchQueryChange(e.currentTarget.value)}}),React.createElement("select",{value:this.props.selectedYear,onChange:function(e){return t.onYearChange(e.currentTarget.value)}},this.props.years),React.createElement(v,(_defineProperty(e={shown:this.props.showSettings,votingMode:this.props.votingMode,unbiasedMode:this.props.unbiasedMode,detailOption:this.props.detailOption,onToggleUnbiased:this.onToggleUnbiased.bind(this),onToggleSettingVisibility:this.onToggleSettingVisibility.bind(this),onToggleVoting:this.onToggleVoting.bind(this)},"onToggleUnbiased",this.onToggleUnbiased.bind(this)),_defineProperty(e,"onChangeDetail",this.onChangeDetail.bind(this)),e)))}},{key:"onSearchQueryChange",value:function(e){this.props.onSearchQueryChange(e)}},{key:"onYearChange",value:function(e){this.props.onYearChange(e)}},{key:"onToggleSettingVisibility",value:function(e){this.props.onToggleSettingVisibility(e)}},{key:"onToggleVoting",value:function(e){this.props.onToggleVoting(e)}},{key:"onToggleUnbiased",value:function(e){this.props.onToggleUnbiased(e)}},{key:"onChangeDetail",value:function(e){this.props.onChangeDetail(e)}}]),n}(),v=function(){_inherits(a,React.Component);var t=_createSuper(a);function a(e){return _classCallCheck(this,a),t.call(this,e)}return _createClass(a,[{key:"render",value:function(){var t=this;return React.createElement("div",{id:"options",onClick:function(e){return e.stopPropagation()}},React.createElement("input",{type:"checkbox",checked:this.props.shown,onChange:function(e){return t.onToggleSettingVisibility(e.currentTarget.checked)}}),React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"},React.createElement("path",{d:"M496.647,312.107l-47.061-36.8c1.459-12.844,1.459-25.812,0-38.656l47.104-36.821c8.827-7.109,11.186-19.575,5.568-29.419l-48.96-84.629c-5.639-9.906-17.649-14.232-28.309-10.197l-55.467,22.315c-10.423-7.562-21.588-14.045-33.323-19.349l-8.512-58.923c-1.535-11.312-11.24-19.72-22.656-19.627h-98.133c-11.321-0.068-20.948,8.246-22.528,19.456l-8.533,59.093c-11.699,5.355-22.846,11.843-33.28,19.371L86.94,75.563c-10.55-4.159-22.549,0.115-28.096,10.005L9.841,170.347c-5.769,9.86-3.394,22.463,5.568,29.547l47.061,36.8c-1.473,12.843-1.473,25.813,0,38.656l-47.104,36.8c-8.842,7.099-11.212,19.572-5.589,29.419l48.939,84.651c5.632,9.913,17.649,14.242,28.309,10.197l55.467-22.315c10.432,7.566,21.604,14.056,33.344,19.371l8.533,58.88c1.502,11.282,11.147,19.694,22.528,19.648h98.133c11.342,0.091,21-8.226,22.592-19.456l8.533-59.093c11.698-5.357,22.844-11.845,33.28-19.371l55.68,22.379c10.55,4.149,22.543-0.122,28.096-10.005l49.152-85.12C507.866,331.505,505.447,319.139,496.647,312.107z M255.964,362.667c-58.91,0-106.667-47.756-106.667-106.667s47.756-106.667,106.667-106.667s106.667,47.756,106.667,106.667C362.56,314.882,314.845,362.597,255.964,362.667z"})),React.createElement("div",{id:"options_window"},q.includes("applicant_voting_master")?React.createElement(React.Fragment,null,React.createElement("div",{className:"option_row"},React.createElement("span",{className:"option_name"},"Voting Mode"),React.createElement("span",{className:"spacer"}),React.createElement("span",{className:"option_value"},React.createElement("input",{type:"checkbox",className:"toggler",disabled:!0,checked:this.props.votingMode,onChange:function(e){return!e.currentTarget.disabled&&t.onToggleVoting(e.currentTarget.checked)}}),React.createElement("span",null))),React.createElement("div",{className:"option_desc"},"Coming soon to a website near you! :D")):null,React.createElement("div",{className:"option_row"},React.createElement("span",{className:"option_name"},"Unbiased Mode"),React.createElement("span",{className:"spacer"}),React.createElement("span",{className:"option_value"},React.createElement("input",{type:"checkbox",className:"toggler",checked:this.props.unbiasedMode||this.props.votingMode,disabled:this.props.votingMode,onChange:function(e){return!e.currentTarget.disabled&&t.onToggleUnbiased(e.currentTarget.checked)}}),React.createElement("span",null))),React.createElement("div",{className:"option_desc"},"Hides personally identifying information to prevent bias."),this.props.votingMode?React.createElement("div",{className:"option_desc option_alert"},"Unbiased Mode cannot be turned off while voting."):null,React.createElement("div",{className:"option_row"},React.createElement("span",{className:"option_name"},"Details"),React.createElement("span",{className:"spacer"}),React.createElement("span",{className:"option_value"},React.createElement("select",{value:this.props.detailOption,onChange:function(e){return t.onChangeDetail(e.currentTarget.value)}},React.createElement("option",null,"Icons"),React.createElement("option",null,"#ID"),React.createElement("option",null,"None")))),React.createElement("div",{className:"option_desc"},"Which details to show on the right-hand side of each applicant.")))}},{key:"onToggleSettingVisibility",value:function(e){this.props.onToggleSettingVisibility(e)}},{key:"onToggleVoting",value:function(e){this.props.onToggleVoting(e)}},{key:"onToggleUnbiased",value:function(e){this.props.onToggleUnbiased(e)}},{key:"onChangeDetail",value:function(e){this.props.onChangeDetail(e)}}]),a}(),R=function(){_inherits(a,React.Component);var t=_createSuper(a);function a(e){return _classCallCheck(this,a),(e=t.call(this,e)).state={},e}return _createClass(a,[{key:"render",value:function(){var t=this,e=this.props.searchFilters,a=[];if(this.props.unbiasedMode&&a.push("Unbiased Mode is enabled. Names and other personally identifying information have been hidden."),this.props.loading)return React.createElement(React.Fragment,null,React.createElement("div",{id:"pre_applicant_message",className:a.length?"":"hidden"},a),React.createElement("div",{id:"applicant_table",className:this.props.compactMode?"compact":""},React.createElement("div",{id:"applicant_message"},"Loading Applicant Data...")),React.createElement("div",{id:"applicant_status_legend"},React.createElement("div",null,React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_applicant"+(e.statusIsActive&&"applicant"==e.status?" filtering":"")},"A"),React.createElement("span",null,"Applicant")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_finalist"+(e.statusIsActive&&"finalist"==e.status?" filtering":"")},"F"),React.createElement("span",null,"Finalist")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_recipient"+(e.statusIsActive&&"recipient"==e.status?" filtering":"")},"R"),React.createElement("span",null,"Recipient")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_ineligible"+(e.statusIsActive&&"ineligible"==e.status?" filtering":"")},"I"),React.createElement("span",null,"Ineligible")))));if(null!==this.props.error)return React.createElement(React.Fragment,null,React.createElement("div",{id:"pre_applicant_message",className:a.length?"":"hidden"},a),React.createElement("div",{id:"applicant_table",className:this.props.compactMode?"compact":""},React.createElement("div",{id:"applicant_error"},this.props.error)),React.createElement("div",{id:"applicant_status_legend"},React.createElement("div",null,React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_applicant"+(e.statusIsActive&&"applicant"==e.status?" filtering":"")},"A"),React.createElement("span",null,"Applicant")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_finalist"+(e.statusIsActive&&"finalist"==e.status?" filtering":"")},"F"),React.createElement("span",null,"Finalist")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_recipient"+(e.statusIsActive&&"recipient"==e.status?" filtering":"")},"R"),React.createElement("span",null,"Recipient")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_ineligible"+(e.statusIsActive&&"ineligible"==e.status?" filtering":"")},"I"),React.createElement("span",null,"Ineligible")))));for(var n=this.props.spreadsheetData,i=[],s=[],r=0,l=n.rows.length;r<l;r++){var o=n.rows[r],c=(_defineProperty(c={},Z.Enum.STATUS.APPLICANT,"applicant"),_defineProperty(c,Z.Enum.STATUS.FINALIST,"finalist"),_defineProperty(c,Z.Enum.STATUS.RECIPIENT,"recipient"),_defineProperty(c,Z.Enum.STATUS.INELIGIBLE,"ineligible"),c[o[n.c_Status]]),u={};if(e.idIsActive){if(parseInt(o[n.c_ID],16)!=e.id)continue;u.ID=!0}if(e.statusIsActive){if(!e.status.includes(c))continue;u.Status=!0}var d=["College","Location"];if(this.props.unbiasedMode||d.unshift("First","Last"),e.wordsIsActive){var p,h,m=!0,g=_createForOfIteratorHelper(e.words);try{for(g.s();!(p=g.n()).done;){var E,f=p.value,v=!1,R=_createForOfIteratorHelper(d);try{for(R.s();!(E=R.n()).done;){var y=E.value,_=void 0;try{_=o[n.c(y)]}catch(e){continue}if(_!=W){_=K[y](_).toLowerCase(),u[y]=u[y]||[];for(var b,N=0;~(b=_.indexOf(f,N));)u[y].push([b,b+f.length]),N=b+1,v=!0}}}catch(e){R.e(e)}finally{R.f()}if(!v){m=!1;break}}}catch(e){g.e(e)}finally{g.f()}if(!m)continue;for(h in u)if(Array.isArray(u[h])){u[h].sort(function(e,t){return e[0]-t[0]});for(var A=[[0,0]],C=0,I=u[h].length;C<I;C++)u[h][C][0]>A[A.length-1][1]?A.push(u[h][C]):u[h][C][1]>A[A.length-1][1]&&(A[A.length-1][1]=u[h][C][1]);u[h]=A}}i.push(r),s.push(u)}for(var T=[],S=0,w=n.rows.length;S<w;S++){var k=n.rows[S],P=i.indexOf(S),M=(_defineProperty($={},Z.Enum.STATUS.APPLICANT,"applicant"),_defineProperty($,Z.Enum.STATUS.FINALIST,"finalist"),_defineProperty($,Z.Enum.STATUS.RECIPIENT,"recipient"),_defineProperty($,Z.Enum.STATUS.INELIGIBLE,"ineligible"),$[k[n.c_Status]]),O=[],L=s[P]||{};L.ID&&"#ID"!=this.props.detailOption&&O.push(React.createElement("div",{key:O.length,className:"whole_match"},"#",this.props.year-2e3,"-",k[n.c_ID]));var U,F=j(k[n.c_First]),D=j(k[n.c_Last]);for(U in L)if(Array.isArray(L[U])){var V=void 0;try{if((V=k[n.c(U)])==W)continue}catch(e){continue}for(var V=K[U](V),Y=!0,x=[],B=0,H=L[U].length;B<H;B++){L[U][B][0]!=L[U][B][1]&&x.push(React.createElement("span",{key:B,className:"filtering"},V.substring(L[U][B][0],L[U][B][1])));var G=V.substring(L[U][B][1],B==H-1?V.length:L[U][B+1][0]),Y=G.match(/^[^a-zA-Z\d]*$/)&&Y;x.push(G)}"First"==U?F=x:"Last"==U?D=x:(1<x.length||"string"!=typeof x[0])&&O.push(React.createElement("div",{key:O.length,className:Y?"whole_match":"partial_match"},x))}var $=null;try{$=($=k[n.c("Icons")])==W?null:$}catch(e){}$&&"Icons"==this.props.detailOption&&($=$.split("|").map(function(e,t){return{"!LI":React.createElement("svg",{key:t,className:"applicant_icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},React.createElement("path",{d:"M24.249,76.25977A1.82385,1.82385,0,0,1,22.418,74.42871v-49.749A1.82385,1.82385,0,0,1,24.249,22.84863h7.09619a1.82385,1.82385,0,0,1,1.83106,1.83106v42.5h24.187a1.82836,1.82836,0,0,1,1.9082,1.9082v5.34082a1.77338,1.77338,0,0,1-.5332,1.29688,1.86191,1.86191,0,0,1-1.375.53418Z"}),React.createElement("path",{d:"M68.50391,76.25977a1.82384,1.82384,0,0,1-1.832-1.83106v-49.749a1.82384,1.82384,0,0,1,1.832-1.83106h7.17187a1.73607,1.73607,0,0,1,1.335.53418,1.83691,1.83691,0,0,1,.4961,1.29688v49.749a1.83359,1.83359,0,0,1-.4961,1.29688,1.73267,1.73267,0,0,1-1.335.53418Z"}),React.createElement("path",{className:"fill_red",d:"M3.0952,28.75317A1.76126,1.76126,0,0,1,4.041,27.71709a1.76176,1.76176,0,0,1,1.4011-.0587L98.28356,61.45a1.82449,1.82449,0,0,1,1.09459,2.34737l-2.4533,6.74038a1.73993,1.73993,0,0,1-.95869,1.07159,1.83967,1.83967,0,0,1-1.38813.02151L1.73653,37.83924a1.83651,1.83651,0,0,1-1.049-.90857,1.73618,1.73618,0,0,1-.0456-1.43711Z"})),"!FG":React.createElement("svg",{key:t,className:"applicant_icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},React.createElement("path",{d:"M8.33936,76.26074A1.82385,1.82385,0,0,1,6.5083,74.42969V24.75732a1.85851,1.85851,0,0,1,.53418-1.37353,1.7659,1.7659,0,0,1,1.29688-.53418H41.4541a1.82974,1.82974,0,0,1,1.90772,1.90771v5.34082a1.73427,1.73427,0,0,1-.53418,1.33545,1.93532,1.93532,0,0,1-1.37354.4961H16.96143V46.42676H39.92822a1.82974,1.82974,0,0,1,1.90772,1.90771v5.34131a1.76668,1.76668,0,0,1-.53418,1.29688,1.85932,1.85932,0,0,1-1.37354.53418H16.96143V74.42969a1.7667,1.7667,0,0,1-.53418,1.29687,1.85851,1.85851,0,0,1-1.37354.53418Z"}),React.createElement("path",{d:"M72.73926,77.02344A26.63592,26.63592,0,0,1,60.79785,74.582,17.80738,17.80738,0,0,1,53.167,67.52441,23.08256,23.08256,0,0,1,50.23,56.499q-.0769-3.27978-.07666-7.0581,0-3.7771.07666-7.13428a22.24425,22.24425,0,0,1,2.937-10.835,17.94968,17.94968,0,0,1,7.707-6.94336,26.77358,26.77358,0,0,1,11.86524-2.44189,29.218,29.218,0,0,1,9.7666,1.48779,22.53507,22.53507,0,0,1,6.98144,3.81543,16.89339,16.89339,0,0,1,4.19629,4.99756,11.57777,11.57777,0,0,1,1.48829,4.95947A1.33322,1.33322,0,0,1,94.79,38.49121a1.65,1.65,0,0,1-1.2207.458H85.71a1.80313,1.80313,0,0,1-1.14453-.30518,2.65331,2.65331,0,0,1-.68652-.91552A11.33568,11.33568,0,0,0,81.97168,34.562a10.29932,10.29932,0,0,0-3.51074-2.63232,13.20883,13.20883,0,0,0-5.72168-1.06836A12.00557,12.00557,0,0,0,64.46,33.60791q-3.08935,2.74731-3.31934,9.08008-.22851,6.63794,0,13.4292.23,6.48633,3.39551,9.30859A12.08116,12.08116,0,0,0,72.8916,68.249a14.78187,14.78187,0,0,0,6.1416-1.2207,9.40112,9.40112,0,0,0,4.27344-3.81543,12.69961,12.69961,0,0,0,1.56445-6.63769V54.21H75.56152a1.76287,1.76287,0,0,1-1.29687-.53418,1.85656,1.85656,0,0,1-.53418-1.374v-4.044a1.85811,1.85811,0,0,1,.53418-1.373,1.76666,1.76666,0,0,1,1.29687-.53418H93.79785a1.73969,1.73969,0,0,1,1.33594.53418,1.94074,1.94074,0,0,1,.49512,1.373v8.01172A21.15466,21.15466,0,0,1,92.84473,67.333a18.4408,18.4408,0,0,1-7.93555,7.17285A27.43188,27.43188,0,0,1,72.73926,77.02344Z"}),React.createElement("path",{className:"fill_red",d:"M3.0952,28.75317A1.76126,1.76126,0,0,1,4.041,27.71709a1.76176,1.76176,0,0,1,1.4011-.0587L98.28356,61.45a1.82449,1.82449,0,0,1,1.09459,2.34737l-2.4533,6.74038a1.73993,1.73993,0,0,1-.95869,1.07159,1.83967,1.83967,0,0,1-1.38813.02151L1.73653,37.83924a1.83651,1.83651,0,0,1-1.049-.90857,1.73618,1.73618,0,0,1-.0456-1.43711Z"}))}[e]||null})),T.push(this.props.unbiasedMode?React.createElement("button",{key:S,className:"applicant_row applicant_status_"+M+(!~P||0!=P&&n.rows[i[P-1]][n.c_Status]==n.rows[S][n.c_Status]?"":" br_top")+(!~P||P!=i.length-1&&n.rows[i[P+1]][n.c_Status]==n.rows[S][n.c_Status]?"":" br_bottom")+(~P?"":" hidden"),"data-applicant-id":this.props.year-2e3+"-"+k[n.c_ID],onClick:function(e){return t.onFocusApplicant(e.currentTarget.getAttribute("data-applicant-id"))}},React.createElement("div",{className:"applicant_status"+(L.Status?" filtering":"")},M[0].toUpperCase()),React.createElement("div",{className:"applicant_id"+(e.idIsActive?" filtering":"")},React.createElement("span",null,"#",this.props.year-2e3,"-",k[n.c_ID])),React.createElement("div",{className:"applicant_match spacer"},O),"Icons"==this.props.detailOption||"#ID"==this.props.detailOption?React.createElement("div",{className:"applicant_icons"},$):null):React.createElement("button",{key:S,className:"applicant_row applicant_status_"+M+(!~P||0!=P&&n.rows[i[P-1]][n.c_Status]==n.rows[S][n.c_Status]?"":" br_top")+(!~P||P!=i.length-1&&n.rows[i[P+1]][n.c_Status]==n.rows[S][n.c_Status]?"":" br_bottom")+(~P?"":" hidden"),"data-applicant-id":this.props.year-2e3+"-"+k[n.c_ID],onClick:function(e){return t.props.onFocusApplicant(e.currentTarget.getAttribute("data-applicant-id"))}},React.createElement("div",{className:"applicant_status"+(e.statusIsActive?" filtering":"")},M[0].toUpperCase()),React.createElement("div",{className:"applicant_name"},F," ",D),React.createElement("div",{className:"applicant_match spacer"},O),"#ID"==this.props.detailOption?React.createElement("div",{className:"applicant_id"},React.createElement("span",{className:L.ID?"filtering":""},"#",this.props.year-2e3+"-"+k[n.c_ID])):"Icons"==this.props.detailOption?React.createElement("div",{className:"applicant_icons"},$):null))}return React.createElement(React.Fragment,null,React.createElement("div",{id:"pre_applicant_message",className:a.length?"":"hidden"},a),React.createElement("div",{id:"applicant_table",className:(this.props.compactMode?" compact":"")+(this.props.unbiasedMode?" unbiased":"")},i.length?"":React.createElement("div",{id:"applicant_message"},"No Results"),T),React.createElement("div",{id:"applicant_status_legend"},React.createElement("div",null,React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_applicant"+(e.statusIsActive&&"applicant"==e.status?" filtering":"")},"A"),React.createElement("span",null,"Applicant")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_finalist"+(e.statusIsActive&&"finalist"==e.status?" filtering":"")},"F"),React.createElement("span",null,"Finalist")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_recipient"+(e.statusIsActive&&"recipient"==e.status?" filtering":"")},"R"),React.createElement("span",null,"Recipient")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_ineligible"+(e.statusIsActive&&"ineligible"==e.status?" filtering":"")},"I"),React.createElement("span",null,"Ineligible")))))}},{key:"onFocusApplicant",value:function(e){this.props.onFocusApplicant(e)}}]),a}(),y=function(){_inherits(a,React.Component);var t=_createSuper(a);function a(e){return _classCallCheck(this,a),(e=t.call(this,e)).state={edits:{},editing:!1,uploading:!1,pendingRow:null,pendingSheetsRow:null,pendingRowIndex:null,failedUpload:!1,warnUnsavedEdit:!1},window.addEventListener("keydown",function(e){"Escape"!=e.key&&"Escape"!=e.code||this.onUnfocus()}.bind(_assertThisInitialized(e))),e}return _createClass(a,[{key:"render",value:function(){var e,t,a,n,i,s=this,r=this.props.spreadsheetData,l=this.props.year,o=this.props.id,c=[];if(r&&!isNaN(l)){var u=function(e,t){try{var a=v[r.c(e)];return a==W?t:a}catch(e){return t}},d=function(e){if(e in Z[l].eliminators&&"Applicant"==b){var t=u(e,W);return Z[l].eliminators[e](t)}return!1};document.documentElement.setAttribute("data-is-focusing","true");var p,h=[],m=_createForOfIteratorHelper(r.rows);try{for(m.s();!(p=m.n()).done;){var g=p.value;parseInt(g[r.c_ID],16)==o&&h.push(g)}}catch(e){m.e(e)}finally{m.f()}if(1!=h.length)return null;var E,f,v=h[0],R=K.First(v[r.c_First])+" "+K.Last(v[r.c_Last]),y=K.Email(u("Email",W)),_="#"+(l-2e3)+"-"+v[r.c_ID],b=K.Status(v[r.c_Status]),N=K.Income(u("Income",W)),A=d("Income"),C=K.Members(u("Members",W)),I=d("Members"),T=K.EFC(u("EFC",W)),S=d("EFC"),w=K.College(u("College",W)),k=d("College"),P=K.Loans(u("Loans",W)),M=d("Loans"),O=K.Campus_Living(u("Campus_Living",W)),L=d("Campus_Living"),U=K.Parent1_Education(u("Parent1_Education",W)),F=d("Parent1_Education"),D=K.Parent2_Education(u("Parent2_Education",W)),V=d("Parent2_Education"),Y=K.Location(u("Location",W)),x=d("Location"),B=K.Year(u("Year",W)),H=d("Year");this.props.unbiasedMode?e="(***) ***-****":(e=K.Phone(u("Phone",W)),t=d("Phone")),a=this.props.unbiasedMode?"— / — / —":K.Pronouns(u("Pronouns",W)),this.props.unbiasedMode?f=(E=u("Birthday",W))==W||isNaN(E.valueOf())?"N/A":(f=new Date,E=new Date(E),Q=f.getFullYear()-E.getFullYear(),E.setFullYear(f.getFullYear()),"".concat(Q-=0<E-f?1:0," year").concat(1==Q?"":"s"," old")):(f=K.Birthday(u("Birthday",W)),n=d("Birthday"));for(var G=Z[this.props.year],$=0,j=G.prompts.length;$<j;$++){var z=G.mapping.Prompts[$],z=r.headers.indexOf(z);~z&&c.push([G.prompts[$],v[z].trim(),$])}(Q=u("Comments","").trim()).match(/^[nN]\s*\/?\s*[aA]$/)&&(Q="")}else document.documentElement.setAttribute("data-is-focusing","false");var d=A||I||S||F||V||k||M||L||x||H||t||n,c=c.map(function(t,e){var a=this;return React.createElement("div",{key:e,"data-prompt-index":t[2],className:"modal_prompt"+(this.state.editing?" editing":"")},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,t[0])),this.state.editing?React.createElement(J,{defaultValue:t[1],onChange:function(e){return a.onEditPrompt(e,t[2])}}):React.createElement("div",{className:"modal_prompt_response",onInput:function(e){}},t[1]))}.bind(this)),Q=this.state.editing||""!=Q?React.createElement("div",{className:"modal_prompt"+(this.state.editing?" editing":"")},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,"Additional Comments")),this.state.editing?React.createElement(J,{defaultValue:Q,onChange:this.onEditComments.bind(this)}):React.createElement("div",{className:"modal_prompt_response",onInput:function(e){}},Q)):null;return this.state.uploading?i="Saving Changes...":this.state.failedUpload?i=React.createElement(React.Fragment,null,'The changes you made failed to save. Make sure you have a stable internet connection and "Edit" access on the Google Sheet.',React.createElement("div",{style:{textAlign:"center",marginTop:".5rem"}},React.createElement("button",{onClick:this.onRetryUpload.bind(this)},"Try Again"),React.createElement("button",{className:"destructive",onClick:this.onAbortEdit.bind(this)},"Delete Changes"))):this.state.warnUnsavedEdit&&(i=React.createElement(React.Fragment,null,"You have unsaved changes. Do you want to go back and save them or exit anyway?",React.createElement("div",{style:{textAlign:"center",marginTop:".5em"}},React.createElement("button",{onClick:function(e){return s.setState({warnUnsavedEdit:!1})}},"Go Back"),React.createElement("button",{className:"destructive",onClick:function(e){s.onUnfocus("force")}},"Exit")))),React.createElement("div",{id:"modal_back",onClick:this.onUnfocus.bind(this)},React.createElement("div",{id:"applicant_modal",onClick:function(e){return e.stopPropagation()}},i?React.createElement("div",{id:"modal_message"},i):null,React.createElement("div",{id:"modal_content"},React.createElement("div",{id:"modal_scroller",onScroll:this.onScroll.bind(this)},this.props.unbiasedMode?React.createElement("h1",null,_):React.createElement("h1",null,this.state.editing?React.createElement("input",{type:"text",defaultValue:R,"data-original-value":R,onChange:this.onEditName.bind(this),onBlur:this.onBlurName.bind(this),pattern:"\\s*[0-9A-Za-zÀ-ÖØ-öø-ÿ]+\\s+[0-9A-Za-zÀ-ÖØ-öø-ÿ]+(?:\\s+[0-9A-Za-zÀ-ÖØ-öø-ÿ]+)*\\s*"}):R),this.props.unbiasedMode?null:React.createElement("h2",null,this.state.editing?React.createElement("input",{type:"email",defaultValue:y,"data-original-value":y,onChange:this.onEditEmail.bind(this),onBlur:this.onBlurField.bind(this,"Email")}):y," ",React.createElement("span",null,_)),React.createElement("h3",null,this.state.editing?React.createElement("select",{defaultValue:b,onChange:this.onEditStatus.bind(this)},React.createElement("option",null,"Applicant"),React.createElement("option",null,"Finalist"),React.createElement("option",null,"Recipient"),React.createElement("option",null,"Ineligible")):b),d&&q.includes("applicant_editor")&&!this.state.editing?React.createElement("button",{className:"destructive",onClick:function(e){return s.setState({edits:{Status:Z.Enum.STATUS.INELIGIBLE}},s.onEndEdit.bind(s))}},"Make Ineligible"):null,React.createElement("section",{className:"modal_section"},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,"Financial Info")),React.createElement("div",{className:"modal_row"},React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing?React.createElement("input",{type:"text",defaultValue:N,"data-original-value":N,onChange:this.onEditIncome.bind(this),onBlur:this.onBlurField.bind(this,"Income"),pattern:"\\s*(?:\\$?\\s*\\d+(?:[,\\s]\\d*)*\\s*(?:\\.\\s*\\d*(?:\\s\\d*)*)?(?:\\s*[kK])?(?:\\s*\\+|\\s*[-–]\\s*\\$?\\s*\\d+(?:[,\\s]\\d*)*\\s*(?:\\.\\s*\\d*(?:\\s\\d*)*)?(?:\\s*[kK])?)?|[nN]\\s*\\/?\\s*[aA])\\s*"}):React.createElement("span",{className:A?"eliminable":""},N),React.createElement("span",null,"Household Income")),React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing?React.createElement("input",{type:"text",defaultValue:C,"data-original-value":C,onChange:this.onEditHouseholdMembers.bind(this),onBlur:this.onBlurField.bind(this,"Members"),pattern:"\\s*(?:\\d+(?:[,\\s]\\d*)*\\s*(?:\\.\\s*\\d*(?:\\s\\d*)*)?(?:\\s*[kK])?|[nN]\\s*\\/?\\s*[aA])\\s*"}):React.createElement("span",{className:I?"eliminable":""},C),React.createElement("span",null,"Household Members")),React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing?React.createElement("input",{type:"text",defaultValue:T,"data-original-value":T,onChange:this.onEditEFC.bind(this),onBlur:this.onBlurField.bind(this,"EFC"),pattern:"\\s*(?:\\$?\\s*\\d+(?:[,\\s]\\d*)*\\s*(?:\\.\\s*\\d*(?:\\s\\d*)*)?(?:\\s*[kK])?|[nN]\\s*\\/?\\s*[aA])\\s*"}):React.createElement("span",{className:S?"eliminable":""},T),React.createElement("span",null,"EFC")))),React.createElement("section",{className:"modal_section"},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,"College Info")),React.createElement("div",{className:"modal_row"},React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("input",{type:"text",defaultValue:w,"data-original-value":w,onChange:this.onEditCollege.bind(this),onBlur:this.onBlurField.bind(this,"College")}):React.createElement("span",{className:k?"eliminable":""},w),React.createElement("span",null,"College")),React.createElement("div",{className:"field",style:{width:"5rem"}},this.state.editing?React.createElement("select",{defaultValue:P,onChange:this.onEditLoans.bind(this)},React.createElement("option",null,"Yes"),React.createElement("option",null,"No"),React.createElement("option",null,"N/A")):React.createElement("span",{className:M?"eliminable":""},P),React.createElement("span",null,"Loans")),React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("select",{defaultValue:O,onChange:this.onEditCampusLiving.bind(this)},React.createElement("option",null,"On campus"),React.createElement("option",null,"Off campus w/ rent"),React.createElement("option",null,"Off campus w/o rent"),React.createElement("option",null,"Unknown"),React.createElement("option",null,"N/A")):React.createElement("span",{className:L?"eliminable":""},O),React.createElement("span",null,"Campus Living")))),React.createElement("section",{className:"modal_section"},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,"Background")),React.createElement("div",{className:"modal_row"},React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("input",{type:"text",defaultValue:Y,"data-original-value":Y,onChange:this.onEditLocation.bind(this),onBlur:this.onBlurField.bind(this,"Location")}):React.createElement("span",{className:x?"eliminable":""},Y),React.createElement("span",null,"Location")),React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("select",{defaultValue:B,onChange:this.onEditYear.bind(this)},React.createElement("option",null,"High school student"),React.createElement("option",null,"First year college student"),React.createElement("option",null,"Returning college student"),React.createElement("option",null,"Graduate student"),React.createElement("option",null,"Transfer student"),React.createElement("option",null,"N/A")):React.createElement("span",{className:H?"eliminable":""},B),React.createElement("span",null,"Year"))),React.createElement("div",{className:"modal_row"},React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("select",{defaultValue:U,onChange:this.onEditPar1Education.bind(this)},React.createElement("option",null,"No diploma"),React.createElement("option",null,"HS diploma or equivalent"),React.createElement("option",null,"Some college"),React.createElement("option",null,"College degree"),React.createElement("option",null,"Multiple degrees"),React.createElement("option",null,"No parent 1")):React.createElement("span",{className:F?"eliminable":""},U),React.createElement("span",null,"Parent 1 Education")),React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("select",{defaultValue:D,onChange:this.onEditPar2Education.bind(this)},React.createElement("option",null,"No diploma"),React.createElement("option",null,"HS diploma or equivalent"),React.createElement("option",null,"Some college"),React.createElement("option",null,"College degree"),React.createElement("option",null,"Multiple degrees"),React.createElement("option",null,"No parent 2")):React.createElement("span",{className:V?"eliminable":""},D),React.createElement("span",null,"Parent 2 Education")))),React.createElement("section",{className:"modal_section"},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,"Personal Info")),React.createElement("div",{className:"modal_row"},React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing&&!this.props.unbiasedMode?React.createElement("input",{type:"text",defaultValue:f,"data-original-value":f,onChange:this.onEditBirthday.bind(this),onBlur:this.onBlurField.bind(this,"Birthday")}):React.createElement("span",{className:n?"eliminable":""},f),React.createElement("span",null,"Birthday")),React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing&&!this.props.unbiasedMode?React.createElement("input",{type:"tel",defaultValue:e,"data-original-value":e,onChange:this.onEditPhoneNumber.bind(this),onBlur:this.onBlurField.bind(this,"Phone"),pattern:"\\s*(?:(?:\\+\\s*1\\s*)?(?:\\(\\s*\\d\\s*\\d\\s*\\d\\s*\\)|\\d\\s*\\d\\s*\\d)\\s*(?:-\\s*)?\\d\\s*\\d\\s*\\d\\s*(?:-\\s*)?\\d\\s*\\d\\s*\\d\\s*\\d|[nN]\\s*\\/?\\s*[aA])\\s*"}):React.createElement("span",{className:t?"eliminable":""},e),React.createElement("span",null,"Phone Number")),React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing&&!this.props.unbiasedMode?React.createElement("input",{type:"text",defaultValue:a,"data-original-value":a,onChange:this.onEditPronouns.bind(this),onBlur:this.onBlurField.bind(this,"Pronouns")}):React.createElement("span",null,a),React.createElement("span",null,"Pronouns")))),c,Q),React.createElement("div",{id:"modal_btn_container"},this.state.editing?React.createElement("button",{onClick:this.onEndEdit.bind(this)},"Save"):null,this.state.editing?React.createElement("button",{className:"destructive",onClick:this.onAbortEdit.bind(this)},"Cancel"):null,q.includes("applicant_editor")&&!this.state.editing?React.createElement("button",{onClick:this.onStartEdit.bind(this)},"Edit"):null,this.state.editing?null:React.createElement("button",{onClick:this.onUnfocus.bind(this)},"Close")))))}},{key:"onScroll",value:function(e){var t=e.currentTarget,a=t.scrollTop,e=t.scrollHeight-t.scrollTop-t.clientHeight;t.style.boxShadow="0 1.2em 0.25em -1em rgba(0,0,0,".concat(Math.min(a/16*.4,.4),") inset, 0 -1.2em 0.25em -1em rgba(0,0,0,").concat(Math.min(e/16*.4,.4),") inset")}},{key:"onUnfocus",value:function(e){this.props.active&&(this.state.editing&&0!=Object.keys(this.state.edits).length&&"force"!=e?this.setState({warnUnsavedEdit:!0}):(this.onAbortEdit(e),this.props.onUnfocus()))}},{key:"onStartEdit",value:function(e){e&&e.currentTarget.disabled||this.setState({editing:!0})}},{key:"onAbortEdit",value:function(e){this.setState({editing:!1,edits:{},uploading:!1,pendingRow:null,pendingSheetsRow:null,pendingRowIndex:null,failedUpload:!1,warnUnsavedEdit:!1})}},{key:"onRetryUpload",value:function(e){"number"==typeof this.state.pendingRowIndex&&this.state.pendingSheetsRow&&(gapi.client.sheets.spreadsheets.values.update({spreadsheetId:Z[this.props.year].id,range:"'".concat(Z[this.props.year].sheet,"'!").concat(this.state.pendingRowIndex+2,":").concat(this.state.pendingRowIndex+2),valueInputOption:"RAW"},{values:[this.state.pendingSheetsRow]}).then(function(){this.props.spreadsheetData.rows[this.state.pendingRowIndex]=this.state.pendingRow,this.setState({uploading:!1,pendingRow:null,pendingSheetsRow:null,pendingRowIndex:null})}.bind(this),function(e){this.setState({uploading:!1,failedUpload:!0})}.bind(this)),this.setState({uploading:!0,failedUpload:!1}))}},{key:"onEndEdit",value:function(){if(this.props.spreadsheetData&&this.props.year&&this.props.id&&0!=Object.keys(this.state.edits).length){for(var e=this.props.spreadsheetData,t=[],a=e.rows.length-1;0<=a;a--)parseInt(e.rows[a][e.c_ID],16)==this.props.id&&t.push(a);if(1==t.length){var n,i=e.rows[t[0]].slice();for(n in this.state.edits)if("Prompts"==n)for(var s in this.state.edits.Prompts){var r=e.headers.indexOf(Z[this.props.year].mapping.Prompts[s]);~r&&(i[r]=this.state.edits.Prompts[s])}else{var l=void 0;try{l=e.c(n)}catch(e){continue}i[l]=this.state.edits[n]}var o,c=Z[this.props.year].translate.to,u=i.slice();for(o in c){var d=void 0;try{d=e.c(o)}catch(e){continue}var p=c[o](i[d]);u[d]=p}gapi.client.sheets.spreadsheets.values.update({spreadsheetId:Z[this.props.year].id,range:"'".concat(Z[this.props.year].sheet,"'!").concat(t[0]+2,":").concat(t[0]+2),valueInputOption:"RAW"},{values:[u]}).then(function(){this.props.spreadsheetData.rows[this.state.pendingRowIndex]=this.state.pendingRow,this.setState({uploading:!1,pendingRow:null,pendingSheetsRow:null,pendingRowIndex:null})}.bind(this),function(e){this.setState({uploading:!1,failedUpload:!0})}.bind(this)),this.setState({editing:!1,edits:{},uploading:!0,failedUpload:!1,pendingRow:i,pendingSheetsRow:u,pendingRowIndex:t[0]})}}else this.setState({editing:!1,edits:{},uploading:!1,pendingRow:null,pendingSheetsRow:null,pendingRowIndex:null,failedUpload:!1})}},{key:"onMakeEdit",value:function(e,t){"Prompt"==e.substring(0,6)?(this.state.edits.Prompts=this.state.edits.Prompts||{},this.state.edits.Prompts[+e.substring(6)]=t):this.state.edits[e]=t}},{key:"onRemoveEdit",value:function(e){"Prompt"==e.substring(0,6)?(this.state.edits.Prompts=this.state.edits.Prompts||{},delete this.state.edits.Prompts[+e.substring(6)],0==Object.keys(this.state.edits.Prompts).length&&delete this.state.edits.Prompts):delete this.state.edits[e]}},{key:"onBlurField",value:function(e,t){var a=this.state.edits[e];t.currentTarget.value=a?K[e](a):t.currentTarget.getAttribute("data-original-value")}},{key:"onEditStatus",value:function(e){this.onMakeEdit("Status",{Ineligible:Z.Enum.STATUS.INELIGIBLE,Applicant:Z.Enum.STATUS.APPLICANT,Finalist:Z.Enum.STATUS.FINALIST,Recipient:Z.Enum.STATUS.RECIPIENT}[e.currentTarget.value]||W)}},{key:"onEditName",value:function(e){var t=j(e.currentTarget.value.trim()).split(/\s+/);1!=t.length&&e.currentTarget.checkValidity()?(this.onMakeEdit("First",K.First(t[0])),this.onMakeEdit("Last",K.Last(t.slice(1).join(" ")))):(this.onRemoveEdit("First"),this.onRemoveEdit("Last"))}},{key:"onBlurName",value:function(e){var t=this.state.edits.First,a=this.state.edits.Last;e.currentTarget.value=t&&a?K.First(t)+" "+K.Last(a):e.currentTarget.getAttribute("data-original-value")}},{key:"onEditEmail",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()&&t?this.onMakeEdit("Email",K.Email(t)):this.onRemoveEdit("Email")}},{key:"onEditEFC",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("EFC",W):("k"==(t=t.replace(/[,\s\$]/g,"").toLowerCase())[t.length-1]&&(t=1e3*t.substring(0,t.length-1)),this.onMakeEdit("EFC",Math.floor(t))):this.onRemoveEdit("EFC")}},{key:"onEditHouseholdMembers",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\/?[aA]$/)||!t?this.onMakeEdit("Members",W):("k"==(t=t.replace(/[,\s]/g,"").toLowerCase())[t.length-1]&&(t=1e3*t.substring(0,t.length-1)),this.onMakeEdit("Members",Math.floor(t))):this.onRemoveEdit("Members")}},{key:"onEditIncome",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("Income",W):1==(t=(t=t.replace(/[,\s\$]/g,"").toLowerCase()).split(/[-–]/)).length?"+"==(t=t[0])[t.length-1]?("k"==(t=t.substring(0,t.length-1))[t.length-1]&&(t=1e3*t.substring(0,t.length-1)),this.onMakeEdit("Income",[Math.floor(t),1/0])):("k"==t[t.length-1]&&(t=1e3*t.substring(0,t.length-1)),this.onMakeEdit("Income",Math.floor(t))):("k"==t[0][t[0].length-1]&&(t[0]=1e3*t[0].substring(0,t[0].length-1)),"k"==t[1][t[1].length-1]&&(t[1]=1e3*t[1].substring(0,t[1].length-1)),this.onMakeEdit("Income",[Math.floor(t[0]),Math.floor(t[1])])):this.onRemoveEdit("Income")}},{key:"onEditCollege",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("College",W):this.onMakeEdit("College",K.College(t)):this.onRemoveEdit("College")}},{key:"onEditLoans",value:function(e){this.onMakeEdit("Loans",{Yes:Z.Enum.LOANS.YES,No:Z.Enum.LOANS.NO,"N/A":W}[e.currentTarget.value]||W)}},{key:"onEditCampusLiving",value:function(e){this.onMakeEdit("Campus_Living",{"On campus":Z.Enum.CAMPUS_LIVING.ON_CAMPUS,"Off campus w/ rent":Z.Enum.CAMPUS_LIVING.OFF_CAMPUS_RENT,"Off campus w/o rent":Z.Enum.CAMPUS_LIVING.OFF_CAMPUS_NO_RENT,Unknown:Z.Enum.CAMPUS_LIVING.UNKNOWN,"N/A":W}[e.currentTarget.value]||W)}},{key:"onEditLocation",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("Location",W):this.onMakeEdit("Location",K.Location(t)):this.onRemoveEdit("Location")}},{key:"onEditYear",value:function(e){this.onMakeEdit("Year",{"High school student":Z.Enum.YEAR.HIGH_SCHOOL,"First year college student":Z.Enum.YEAR.FIRST_YEAR,"Returning college student":Z.Enum.YEAR.COLLEGE,"Graduate Student":Z.Enum.YEAR.GRADUATE,"Transfer Student":Z.Enum.YEAR.TRANSFER,"N/A":W}[e.currentTarget.value]||W)}},{key:"onEditPar1Education",value:function(e){this.onMakeEdit("Parent1_Education",{"No HS diploma":Z.Enum.PARENT1_EDUCATION.NO_DIPLOMA,"HS diploma or equivalent":Z.Enum.PARENT1_EDUCATION.DIPLOMA,"Some college":Z.Enum.PARENT1_EDUCATION.SOME_COLLEGE,"College degree":Z.Enum.PARENT1_EDUCATION.DEGREE,"Multiple degrees":Z.Enum.PARENT1_EDUCATION.MULTIPLE_DEGREES,"No parent 1":Z.Enum.PARENT2_EDUCATION.NO_PARENT,"N/A":W}[e.currentTarget.value]||W)}},{key:"onEditPar2Education",value:function(e){this.onMakeEdit("Parent2_Education",{"No HS diploma":Z.Enum.PARENT2_EDUCATION.NO_DIPLOMA,"HS diploma or equivalent":Z.Enum.PARENT2_EDUCATION.DIPLOMA,"Some college":Z.Enum.PARENT2_EDUCATION.SOME_COLLEGE,"College degree":Z.Enum.PARENT2_EDUCATION.DEGREE,"Multiple degrees":Z.Enum.PARENT2_EDUCATION.MULTIPLE_DEGREES,"No parent 2":Z.Enum.PARENT2_EDUCATION.NO_PARENT,"N/A":W}[e.currentTarget.value]||W)}},{key:"onEditBirthday",value:function(e){var t=e.currentTarget.value.trim().toLowerCase();if(e.currentTarget.checkValidity())if(t.match(/^[nN]\s*\/?\s*[aA]$/)||!t)this.onMakeEdit("Birthday",W);else{var a,n,i,s,r,l,o=new Date;(a=t.match(/(\d+)\s*[\/\.-]\s*(\d+)\s*[\/\.-]\s*(\d+)/))?(u=+a[1],r=+a[2],n=+a[3],i=o.getFullYear(),s=100*Math.floor(i/100),n<100&&(n<i%100||!(i%100<n)&&(u<o.getMonth()+1||!(u>o.getMonth()+1)&&r<o.getDate())?n+=s:n+=s-100),12<u&&r<=12&&(u=(l=[r,u])[0],r=l[1])):(a=t.match(/^([a-z]+)\s*(?:\.\s*)?(\d{1,2})\s*(?:,\s*)?(\d{4})$/))&&(u=1==(t=(l=["january","february","march","april","may","june","july","august","september","october","november","december"]).filter(function(e){return 0==e.indexOf(a[1])})).length?l.indexOf(t[0])+1:0,r=+a[2],n=+a[3]);var c=n%400==0||n%4==0&&n%100!=0;switch(u){case 0:case 2:case 4:case 6:case 7:case 9:case 11:r=r<=31?r:0;break;case 3:case 5:case 8:case 10:break;case 1:r=r<=(c?29:28)?r:0}if(0<u&&u<=12&&0!=r){var u=new Date(n,u-1,r);if(u.valueOf())return this.onMakeEdit("Birthday",u),void e.currentTarget.removeAttribute("aria-invalid")}this.onRemoveEdit("Birthday",W),e.currentTarget.setAttribute("aria-invalid","")}else this.onRemoveEdit("Birthday")}},{key:"onEditPhoneNumber",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("Phone",W):this.onMakeEdit("Phone",K.Phone(t)):this.onRemoveEdit("Phone")}},{key:"onEditPronouns",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("Pronouns",W):this.onMakeEdit("Pronouns",K.Pronouns(t)):this.onRemoveEdit("Pronouns")}},{key:"onEditPrompt",value:function(e,t){e.currentTarget.checkValidity()?this.onMakeEdit("Prompt"+t,e.currentTarget.value.trim()):this.onRemoveEdit("Prompt"+t)}},{key:"onEditComments",value:function(e){e.currentTarget.checkValidity()?this.onMakeEdit("Comments",e.currentTarget.value.trim()):this.onRemoveEdit("Comments")}}]),a}(),J=function(){_inherits(n,React.Component);var a=_createSuper(n);function n(e){var t;return _classCallCheck(this,n),(t=a.call(this,e)).state={value:e.defaultValue||"",ref:React.createRef()},t.onChange=t.props.onChange?t.props.onChange.bind(_assertThisInitialized(t)):function(){},t.oldValue=e.defaultValue||"",t}return _createClass(n,[{key:"render",value:function(){return React.createElement("textarea",{ref:this.state.ref,value:this.state.value,onInput:this.onNewValue.bind(this),rows:"1"})}},{key:"componentDidMount",value:function(){this.onNewValue(!1)}},{key:"onNewValue",value:function(e){var t=this.state.ref.current;this.setState({value:t.value});var a=getComputedStyle(t);t.style.height="",t.style.height=t.scrollHeight+parseFloat(a.borderBottomWidth)+"px",e&&this.oldValue!=t.value&&(this.onChange(e),this.oldValue=t.value)}}]),n}(),_=[];for(d in Z)isNaN(d)||_.push(d);_.sort(),user.logIn.then(function(){ReactDOM.render(React.createElement(E,{years:_}),document.getElementById("content"))}),gapiLoaded.catch(function(){document.getElementById("content").style.display="none",document.getElementById("gapi-failed").style.display="flex",document.getElementById("page-reload").addEventListener("click",location.reload.bind(location))})}();