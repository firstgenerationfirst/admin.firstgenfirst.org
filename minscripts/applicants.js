"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,s=[],r=!0,o=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(s.push(a.value),!t||s.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(o)throw i}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(n){var a=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(n);return _possibleConstructorReturn(this,a?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,t=function(){};return{s:t,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}!function(){var e,X=window.applicant_spreadsheets,m=X.MISSING_FIELD,ee=X.Enum.NA,r=["applicant","finalist","recipient","ineligible"],s={},t=_createForOfIteratorHelper(document.cookie.split("; "));try{for(t.s();!(e=t.n()).done;){var n=_slicedToArray(e.value.split("="),2),a=n[0],i=n[1];s[decodeURIComponent(a)]=decodeURIComponent(i)}}catch(e){t.e(e)}finally{t.f()}var o=[];user.readProfile.then(function(e){o=e.roles,te=o.includes("applicant_editor")});var te=!1,l=firebase.firestore().collection("applicant_submissions").doc("voting_metadata");function c(e,t){return isNaN(e)?e:e%1e3==0&&0!=e?(t||"")+(e/1e3).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+"k":(t||"")+e.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")}function u(e){return c(e,"$")}function $(e){return e.trim().replace(/\s+/g," ").toLocaleLowerCase(navigator.language).replace(/([^0-9A-Za-zÀ-ÖØ-öø-ÿ]+(?!(?:the|a|an|and|but|or|for|nor|as|if|in|on|of)\b)|^|[^0-9A-Za-zÀ-ÖØ-öø-ÿ]](?=[0-9A-Za-zÀ-ÖØ-öø-ÿ]+$))([0-9A-Za-zÀ-ÖØ-öø-ÿ])/g,function(e,t,n){return t+n.toLocaleUpperCase(navigator.language)})}function d(t){return function(e){return e==ee?"N/A":t(e)}}var p,h={alabama:"AL",alaska:"AK",arizona:"AZ",arkansas:"AR",california:"CA",colorado:"CO",connecticut:"CT",delaware:"DE",florida:"FL",georgia:"GA",hawaii:"HI",idaho:"ID",illinois:"IL",indiana:"IN",iowa:"IA",kansas:"KS",kentucky:"KY",louisiana:"LA",maine:"ME",maryland:"MD",massachusetts:"MA",michigan:"MI",minnesota:"MN",mississippi:"MS",missouri:"MO",montana:"MT",nebraska:"NE",nevada:"NV","new hampshire":"NH","new jersey":"NJ","new mexico":"NM","new york":"NY","north carolina":"NC","north dakota":"ND",ohio:"OH",oklahoma:"OK",oregon:"OR",pennsylvania:"PA","rhode island":"RI","south carolina":"SC","south dakota":"SD",tennessee:"TN",texas:"TX",utah:"UT",vermont:"VT",virginia:"VA",washington:"WA","west virginia":"WV",wisconsin:"WI",wyoming:"WY"},g=Object.values(h),E=new RegExp("^(.+?)(?:(?:,\\s*|\\s+)(".concat(Object.keys(h).join("|"),"))?$")),ne={First:d($),Last:d($),Email:d(function(e){return e.toLocaleLowerCase(navigator.language)}),Status:d(function(e){var t={};return _defineProperty(t,X.Enum.STATUS.APPLICANT,"Applicant"),_defineProperty(t,X.Enum.STATUS.FINALIST,"Finalist"),_defineProperty(t,X.Enum.STATUS.RECIPIENT,"Recipient"),_defineProperty(t,X.Enum.STATUS.INELIGIBLE,"Ineligible"),t[e]||"N/A"}),Income:d(function(e){return Array.isArray(e)?"Infinity"==e[1]?"".concat(u(e[0]),"+"):"".concat(u(e[0]),"–").concat(u(e[1])):u(e)}),Members:d(c),EFC:d(u),College:d(function(e){return e=({Stanford:"Stanford University","Uc Los Angeles":"UCLA",Ucsd:"UC San Diego",Ucsb:"UC Santa Barbara",Ucsc:"UC Santa Cruz",Ucr:"UC Riverside",Ucm:"UC Merced",Ucd:"UC Davis",Ucb:"UC Berkeley",Berkeley:"UC Berkeley",Uci:"UC Irvine",Csun:"CSU Northridge","Rio Hondo":"Rio Hondo College",Ivc:"Irvine Valley College",Lbcc:"Long Beach City College",Iupui:"Indiana University–Purdue University Indianapolis"}[e=$(e).replace(/\bU\b/,"University")]||e).replace(/\b(?:uc|ucla|csu|su|cn|cc|usc|iupui|ca|suny)\b/gi,function(e){return e.toLocaleUpperCase(navigator.language)})}),Loans:d(function(e){var t={};return _defineProperty(t,X.Enum.LOANS.YES,"Yes"),_defineProperty(t,X.Enum.LOANS.NO,"No"),_defineProperty(t,X.Enum.LOANS.UNCERTAIN,"N/A"),t[e]||"N/A"}),Campus_Living:d(function(e){var t={};return _defineProperty(t,X.Enum.CAMPUS_LIVING.ON_CAMPUS,"On campus"),_defineProperty(t,X.Enum.CAMPUS_LIVING.OFF_CAMPUS_RENT,"Off campus w/ rent"),_defineProperty(t,X.Enum.CAMPUS_LIVING.OFF_CAMPUS_NO_RENT,"Off campus w/o rent"),_defineProperty(t,X.Enum.CAMPUS_LIVING.UNCERTAIN,"Unknown"),t[e]||"N/A"}),Location:d(function(e){if("washington dc"==(e=e.toLowerCase().trim()).replace(/[^a-z\d\s]/g,""))return"Washington, DC";if(g.includes(e.substring(e.length-2).toUpperCase())&&e.substring(0,e.length-2).trim().length!=e.length-2){var t=e.substring(e.length-2);return","!=(e=e.substring(0,e.length-2).trim())[e.length-1]&&(e+=","),$(e)+" "+t.toUpperCase()}return e.replace(E,function(e,t,n){return $(t)+(n?", "+h[n]:"")})}),Year:d(function(e){var t={};return _defineProperty(t,X.Enum.YEAR.HIGH_SCHOOL,"High school student"),_defineProperty(t,X.Enum.YEAR.FIRST_YEAR,"First year college student"),_defineProperty(t,X.Enum.YEAR.COLLEGE,"Returning college student"),_defineProperty(t,X.Enum.YEAR.GRADUATE,"Graduate student"),_defineProperty(t,X.Enum.YEAR.TRANSFER,"Transfer student"),t[e]||"N/A"}),Parent1_Education:d(function(e){var t={};return _defineProperty(t,X.Enum.PARENT1_EDUCATION.NO_DIPLOMA,"No diploma"),_defineProperty(t,X.Enum.PARENT1_EDUCATION.DIPLOMA,"HS diploma or equivalent"),_defineProperty(t,X.Enum.PARENT1_EDUCATION.SOME_COLLEGE,"Some college"),_defineProperty(t,X.Enum.PARENT1_EDUCATION.DEGREE,"College degree"),_defineProperty(t,X.Enum.PARENT1_EDUCATION.MULTIPLE_DEGREES,"Multiple degrees"),_defineProperty(t,X.Enum.PARENT1_EDUCATION.NO_PARENT,"No parent 1"),t[e]||"N/A"}),Parent2_Education:d(function(e){var t={};return _defineProperty(t,X.Enum.PARENT2_EDUCATION.NO_DIPLOMA,"No diploma"),_defineProperty(t,X.Enum.PARENT2_EDUCATION.DIPLOMA,"HS diploma or equivalent"),_defineProperty(t,X.Enum.PARENT2_EDUCATION.SOME_COLLEGE,"Some college"),_defineProperty(t,X.Enum.PARENT2_EDUCATION.DEGREE,"College degree"),_defineProperty(t,X.Enum.PARENT2_EDUCATION.MULTIPLE_DEGREES,"Multiple degrees"),_defineProperty(t,X.Enum.PARENT2_EDUCATION.NO_PARENT,"No parent 2"),t[e]||"N/A"}),Phone:d(function(e){return 12==(e=e.replace(/[^\d\+]+/g,"")).length&&"+1"==e.substring(0,2)?e=e.substring(2):11==e.length&&"1"==e.substring[0]&&(e=e.substring(1)),10!=e.length||isNaN(e)?"N/A":"(".concat(e.substring(0,3),") ").concat(e.substring(3,6),"-").concat(e.substring(6,10))}),Birthday:d(function(e){return!isNaN(e.valueOf())&&e<new Date?"".concat(["Jan.","Feb.","Mar.","Apr.","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."][e.getMonth()]," ").concat(e.getDate(),", ").concat(e.getFullYear()):"N/A"}),Pronouns:d(function(e){return e.split("/").map(function(e){return $(e.trim())}).join("/")})},f=function(){_inherits(i,React.Component);var a=_createSuper(i);function i(e){_classCallCheck(this,i);var t=a.call(this,e),n=(new Date).getFullYear(),e=e.years.filter(function(e){return e-n<=0}).reverse()[0];return t.state={spreadsheetData:null,loadedYears:{},selectedYear:e,loading:!0,compactMode:"true"==s["applicants-compact_mode"],votingMode:!1,unbiasedMode:"true"==s["applicants-unbiased_mode"],detailOption:s["applicants-details"]||"Icons",searchQuery:"",isFocusing:!1,applicantFocus:null,showSettings:!1,searchFilters:{status:r,statusIsActive:!1,id:null,idIsActive:!1,words:[],wordsIsActive:!1},error:null},user.readProfile.then(function(e){e.roles.includes("applicant_voter")&&l.onSnapshot(function(e){e=e.data().voting_mode;e!=this.state.votingMode&&this.onToggleVoting(e,!0)}.bind(this))}.bind(_assertThisInitialized(t))),document.addEventListener("click",function(){this.onToggleSettingVisibility.call(this,!1)}.bind(_assertThisInitialized(t))),t}return _createClass(i,[{key:"render",value:function(){var e,t,n,a;if(this.state.applicantFocus&&(t=(e=_slicedToArray(this.state.applicantFocus.split("-"),2))[0],e=e[1],t=+t+2e3,n=parseInt(e,16)),this.state.applicantFocus)for(var i=this.state.spreadsheetData,s=i.rows.length-1;0<=s;s--)parseInt(i.rows[s][i.c_ID],16)==n&&(a=s);return React.createElement(React.Fragment,null,React.createElement(v,{searchQuery:this.state.searchQuery,selectedYear:this.state.selectedYear,years:this.props.years,onSearchQueryChange:this.onSearchQueryChange.bind(this),votingMode:this.state.votingMode,unbiasedMode:this.state.unbiasedMode,detailOption:this.state.detailOption,showSettings:this.state.showSettings,onYearChange:this.onYearChange.bind(this),onToggleSettingVisibility:this.onToggleSettingVisibility.bind(this),onToggleVoting:this.onToggleVoting.bind(this),onToggleUnbiased:this.onToggleUnbiased.bind(this),onChangeDetail:this.onChangeDetail.bind(this)}),React.createElement(y,{year:this.state.selectedYear,searchFilters:this.state.searchFilters,spreadsheetData:this.state.spreadsheetData,loading:this.state.loading,error:this.state.error,compactMode:this.state.compactMode,unbiasedMode:this.state.unbiasedMode,detailOption:this.state.detailOption,onFocusApplicant:this.onFocusApplicant.bind(this)}),React.createElement(_,{spreadsheetData:this.state.spreadsheetData,active:this.state.isFocusing,applicant:this.state.applicantFocus,year:t,id:n,applicantRowIndex:a,unbiasedMode:this.state.unbiasedMode,onUnfocus:this.onUnfocus.bind(this)}))}},{key:"onSearchQueryChange",value:function(e){var t={};this.setState({searchQuery:e}),"s"==(e=e.toLowerCase().trim())[e.length-1]&&r.includes(e.substring(0,e.length-1))?e="status:"+e.substring(0,e.length-1):r.includes(e)&&(e="status:"+e);var n=e.match(/(?:\s+|^)status\s*[:=]\s*([a-z]+)(?=\s+|$)/);n?(e=e.substring(0,n.index)+e.substring(n.index+n[0].length),t.status=r.filter(function(e){return 0==e.indexOf(n[1])}),t.statusIsActive=!0):(t.status=r,t.statusIsActive=!1);var a,i,s=e.match(/(?:\s+|^)(?:#?(\d+)\s*-\s*([a-f\d]*)|#([a-f\d]+)|([a-f\d]*\d[a-f\d]*))(?=\s+|$)/);s?(e=e.substring(0,s.index)+e.substring(s.index+s[0].length),"string"==typeof s[4]?(a=this.state.selectedYear,i=parseInt(s[4],16)):"string"==typeof s[3]?(a=this.state.selectedYear,i=parseInt(s[3],16)):"string"==typeof s[1]&&"string"==typeof s[2]&&(a=+s[1],i=parseInt(s[2],16)),a<2e3&&(a+=2e3),isNaN(i)?(t.id=null,t.idIsActive=!1):(t.id=i,t.idIsActive=!0),this.state.selectedYear!=a&&this.onYearChange(a)):(t.id=null,t.idIsActive=!1),(e=e.trim()).length?(e=e.split(/\s+/).filter(function(e){return 1<e.length}),t.words=e,t.wordsIsActive=!!e.length):(t.words=[],t.wordsIsActive=!1),this.setState({searchFilters:t})}},{key:"onYearChange",value:function(h,t,n){function e(e){this.setState({spreadsheetData:e,error:null,loading:!1}),t(e)}function a(e){"PERMISSION_DENIED"==e.result.error.status?this.setState({error:React.createElement(React.Fragment,null,"Your account does not have viewing permission for this year's Google Sheet. Try viewing the spreadsheet using the button below, and request permission.",React.createElement("a",{href:"https://docs.google.com/spreadsheets/d/".concat(X[h].id,"/view"),id:"open_spreadsheet",className:"button",target:"_blank"},"View Spreadsheet")),loading:!1}):(this.setState({error:"There was an unknown problem getting this year's applicant data.",loading:!1}),n(e))}h in X&&(t="function"==typeof t?t:function(){},n="function"==typeof n?n:function(){},this.setState({selectedYear:+h,loading:!0}),h in this.state.loadedYears?this.state.loadedYears[h].loaded?e.call(this,this.state.loadedYears[h].data):a.call(this,this.state.loadedYears[h].error):new Promise(function(p,t){gapiLoaded.then(function(){return gapi.client.sheets.spreadsheets.values.get({spreadsheetId:X[h].id,range:X[h].sheet}).then(function(e){var t=e.result.values,a=t.shift();function n(e){var t=e in X[h].mapping?X[h].mapping[e]:e,n=a.indexOf(t);if(t!=m&&~n)return n;throw new RangeError('No column with name "'.concat(e,'".'))}for(var i=t.length-1;0<=i;i--){var s=a.length-t[i].length;s&&(t[i]=t[i].concat(new Array(s).fill("")))}var r,o=X[h].translate.from;for(r in o){var l,c=n(r),u=_createForOfIteratorHelper(t);try{for(u.s();!(l=u.n()).done;){var d=l.value;d[c]=o[r](d[c].trim())}}catch(e){u.e(e)}finally{u.f()}}e={c:n,c_ID:n("ID"),c_First:n("First"),c_Last:n("Last"),c_Status:n("Status"),headers:a,rows:t};this.state.loadedYears[h]={loaded:!0,data:e},p(e)}.bind(this),function(e){this.state.loadedYears[h]={loaded:!1,error:e},t(e)}.bind(this))}.bind(this))}.bind(this)).then(e.bind(this),a.bind(this)))}},{key:"onFocusApplicant",value:function(e){var t=+e.split("-")[0]+2e3;isNaN(t)||this.onYearChange(t,function(){this.setState({isFocusing:!0,applicantFocus:e})}.bind(this))}},{key:"onUnfocus",value:function(){this.setState({isFocusing:!1,applicantFocus:null})}},{key:"onToggleSettingVisibility",value:function(e){this.setState({showSettings:e})}},{key:"onToggleVoting",value:function(e,t){this.setState({votingMode:e,unbiasedMode:e},function(){this.onSearchQueryChange(this.state.searchQuery)}.bind(this)),t||l.update({voting_mode:e})}},{key:"onToggleUnbiased",value:function(e){var t=new Date;t.setFullYear(t.getFullYear()+2),document.cookie="applicants-unbiased_mode=".concat(e,";expires=").concat(t.toUTCString()),this.setState({unbiasedMode:e},function(){this.onSearchQueryChange(this.state.searchQuery)}.bind(this))}},{key:"onChangeDetail",value:function(e){var t=new Date;t.setFullYear(t.getFullYear()+2),document.cookie="applicants-details=".concat(e,";expires=").concat(t.toUTCString()),this.setState({detailOption:e})}}]),i}(),v=function(){_inherits(a,React.Component);var n=_createSuper(a);function a(e){_classCallCheck(this,a);for(var t=e.years.length-1;0<=t;t--)e.years[t]=React.createElement("option",{key:e.years[t]},e.years[t]);return n.call(this,e)}return _createClass(a,[{key:"componentDidMount",value:function(){this.onYearChange(this.props.selectedYear)}},{key:"render",value:function(){var e,t=this;return React.createElement("div",{id:"search_bar"},React.createElement("input",{value:this.props.searchQuery,placeholder:"Search Applicants",onChange:function(e){return t.onSearchQueryChange(e.currentTarget.value)}}),React.createElement("select",{value:this.props.selectedYear,onChange:function(e){return t.onYearChange(e.currentTarget.value)}},this.props.years),React.createElement(R,(_defineProperty(e={shown:this.props.showSettings,votingMode:this.props.votingMode,unbiasedMode:this.props.unbiasedMode,detailOption:this.props.detailOption,onToggleUnbiased:this.onToggleUnbiased.bind(this),onToggleSettingVisibility:this.onToggleSettingVisibility.bind(this),onToggleVoting:this.onToggleVoting.bind(this)},"onToggleUnbiased",this.onToggleUnbiased.bind(this)),_defineProperty(e,"onChangeDetail",this.onChangeDetail.bind(this)),e)))}},{key:"onSearchQueryChange",value:function(e){this.props.onSearchQueryChange(e)}},{key:"onYearChange",value:function(e){this.props.onYearChange(e)}},{key:"onToggleSettingVisibility",value:function(e){this.props.onToggleSettingVisibility(e)}},{key:"onToggleVoting",value:function(e){this.props.onToggleVoting(e)}},{key:"onToggleUnbiased",value:function(e){this.props.onToggleUnbiased(e)}},{key:"onChangeDetail",value:function(e){this.props.onChangeDetail(e)}}]),a}(),R=function(){_inherits(n,React.Component);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n,[{key:"render",value:function(){var t=this;return React.createElement("div",{id:"options",onClick:function(e){return e.stopPropagation()}},React.createElement("input",{type:"checkbox",checked:this.props.shown,onChange:function(e){return t.onToggleSettingVisibility(e.currentTarget.checked)}}),React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"},React.createElement("path",{d:"M496.647,312.107l-47.061-36.8c1.459-12.844,1.459-25.812,0-38.656l47.104-36.821c8.827-7.109,11.186-19.575,5.568-29.419l-48.96-84.629c-5.639-9.906-17.649-14.232-28.309-10.197l-55.467,22.315c-10.423-7.562-21.588-14.045-33.323-19.349l-8.512-58.923c-1.535-11.312-11.24-19.72-22.656-19.627h-98.133c-11.321-0.068-20.948,8.246-22.528,19.456l-8.533,59.093c-11.699,5.355-22.846,11.843-33.28,19.371L86.94,75.563c-10.55-4.159-22.549,0.115-28.096,10.005L9.841,170.347c-5.769,9.86-3.394,22.463,5.568,29.547l47.061,36.8c-1.473,12.843-1.473,25.813,0,38.656l-47.104,36.8c-8.842,7.099-11.212,19.572-5.589,29.419l48.939,84.651c5.632,9.913,17.649,14.242,28.309,10.197l55.467-22.315c10.432,7.566,21.604,14.056,33.344,19.371l8.533,58.88c1.502,11.282,11.147,19.694,22.528,19.648h98.133c11.342,0.091,21-8.226,22.592-19.456l8.533-59.093c11.698-5.357,22.844-11.845,33.28-19.371l55.68,22.379c10.55,4.149,22.543-0.122,28.096-10.005l49.152-85.12C507.866,331.505,505.447,319.139,496.647,312.107z M255.964,362.667c-58.91,0-106.667-47.756-106.667-106.667s47.756-106.667,106.667-106.667s106.667,47.756,106.667,106.667C362.56,314.882,314.845,362.597,255.964,362.667z"})),React.createElement("div",{id:"options_window"},o.includes("applicant_voting_master")?React.createElement(React.Fragment,null,React.createElement("div",{className:"option_row"},React.createElement("span",{className:"option_name"},"Voting Mode"),React.createElement("span",{className:"spacer"}),React.createElement("span",{className:"option_value"},React.createElement("input",{type:"checkbox",className:"toggler",disabled:!0,checked:this.props.votingMode,onChange:function(e){return!e.currentTarget.disabled&&t.onToggleVoting(e.currentTarget.checked)}}),React.createElement("span",null))),React.createElement("div",{className:"option_desc"},"Coming soon to a website near you! :D")):null,React.createElement("div",{className:"option_row"},React.createElement("span",{className:"option_name"},"Unbiased Mode"),React.createElement("span",{className:"spacer"}),React.createElement("span",{className:"option_value"},React.createElement("input",{type:"checkbox",className:"toggler",checked:this.props.unbiasedMode||this.props.votingMode,disabled:this.props.votingMode,onChange:function(e){return!e.currentTarget.disabled&&t.onToggleUnbiased(e.currentTarget.checked)}}),React.createElement("span",null))),React.createElement("div",{className:"option_desc"},"Hides personally identifying information to prevent bias."),this.props.votingMode?React.createElement("div",{className:"option_desc option_alert"},"Unbiased Mode cannot be turned off while voting."):null,React.createElement("div",{className:"option_row"},React.createElement("span",{className:"option_name"},"Details"),React.createElement("span",{className:"spacer"}),React.createElement("span",{className:"option_value"},React.createElement("select",{value:this.props.detailOption,onChange:function(e){return t.onChangeDetail(e.currentTarget.value)}},React.createElement("option",null,"Icons"),React.createElement("option",null,"#ID"),React.createElement("option",null,"None")))),React.createElement("div",{className:"option_desc"},"Which details to show on the right-hand side of each applicant.")))}},{key:"onToggleSettingVisibility",value:function(e){this.props.onToggleSettingVisibility(e)}},{key:"onToggleVoting",value:function(e){this.props.onToggleVoting(e)}},{key:"onToggleUnbiased",value:function(e){this.props.onToggleUnbiased(e)}},{key:"onChangeDetail",value:function(e){this.props.onChangeDetail(e)}}]),n}(),y=function(){_inherits(n,React.Component);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),(e=t.call(this,e)).state={},e}return _createClass(n,[{key:"render",value:function(){var t=this,e=this.props.searchFilters,n=[];if(this.props.unbiasedMode&&n.push("Unbiased Mode is enabled. Names and other personally identifying information have been hidden."),this.props.loading)return React.createElement(React.Fragment,null,React.createElement("div",{id:"pre_applicant_message",className:n.length?"":"hidden"},n),React.createElement("div",{id:"applicant_table",className:this.props.compactMode?"compact":""},React.createElement("div",{id:"applicant_message"},"Loading Applicant Data...")),React.createElement("div",{id:"applicant_status_legend"},React.createElement("div",null,React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_applicant"+(e.statusIsActive&&"applicant"==e.status?" filtering":"")},"A"),React.createElement("span",null,"Applicant")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_finalist"+(e.statusIsActive&&"finalist"==e.status?" filtering":"")},"F"),React.createElement("span",null,"Finalist")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_recipient"+(e.statusIsActive&&"recipient"==e.status?" filtering":"")},"R"),React.createElement("span",null,"Recipient")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_ineligible"+(e.statusIsActive&&"ineligible"==e.status?" filtering":"")},"I"),React.createElement("span",null,"Ineligible")))));if(null!==this.props.error)return React.createElement(React.Fragment,null,React.createElement("div",{id:"pre_applicant_message",className:n.length?"":"hidden"},n),React.createElement("div",{id:"applicant_table",className:this.props.compactMode?"compact":""},React.createElement("div",{id:"applicant_error"},this.props.error)),React.createElement("div",{id:"applicant_status_legend"},React.createElement("div",null,React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_applicant"+(e.statusIsActive&&"applicant"==e.status?" filtering":"")},"A"),React.createElement("span",null,"Applicant")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_finalist"+(e.statusIsActive&&"finalist"==e.status?" filtering":"")},"F"),React.createElement("span",null,"Finalist")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_recipient"+(e.statusIsActive&&"recipient"==e.status?" filtering":"")},"R"),React.createElement("span",null,"Recipient")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_ineligible"+(e.statusIsActive&&"ineligible"==e.status?" filtering":"")},"I"),React.createElement("span",null,"Ineligible")))));for(var a=this.props.spreadsheetData,i=[],s=[],r=0,o=a.rows.length;r<o;r++){var l=a.rows[r],c=(_defineProperty(c={},X.Enum.STATUS.APPLICANT,"applicant"),_defineProperty(c,X.Enum.STATUS.FINALIST,"finalist"),_defineProperty(c,X.Enum.STATUS.RECIPIENT,"recipient"),_defineProperty(c,X.Enum.STATUS.INELIGIBLE,"ineligible"),c[l[a.c_Status]]),u={};if(e.idIsActive){if(parseInt(l[a.c_ID],16)!=e.id)continue;u.ID=!0}if(e.statusIsActive){if(!e.status.includes(c))continue;u.Status=!0}var d=["Email","College","Location"];if(this.props.unbiasedMode||d.unshift("First","Last"),e.wordsIsActive){var p,h,m=!0,g=_createForOfIteratorHelper(e.words);try{for(g.s();!(p=g.n()).done;){var E,f=p.value,v=!1,R=_createForOfIteratorHelper(d);try{for(R.s();!(E=R.n()).done;){var y=E.value,_=void 0;try{_=l[a.c(y)]}catch(e){continue}if(_!=ee){_=ne[y](_).toLowerCase(),u[y]=u[y]||[];for(var b,N=0;~(b=_.indexOf(f,N));)u[y].push([b,b+f.length]),N=b+1,v=!0}}}catch(e){R.e(e)}finally{R.f()}if(!v){m=!1;break}}}catch(e){g.e(e)}finally{g.f()}if(!m)continue;for(h in u)if(Array.isArray(u[h])){u[h].sort(function(e,t){return e[0]-t[0]});for(var I=[[0,0]],A=0,C=u[h].length;A<C;A++)u[h][A][0]>I[I.length-1][1]?I.push(u[h][A]):u[h][A][1]>I[I.length-1][1]&&(I[I.length-1][1]=u[h][A][1]);u[h]=I}}i.push(r),s.push(u)}for(var T=[],S=0,k=a.rows.length;S<k;S++){var w=a.rows[S],P=i.indexOf(S),M=(_defineProperty(j={},X.Enum.STATUS.APPLICANT,"applicant"),_defineProperty(j,X.Enum.STATUS.FINALIST,"finalist"),_defineProperty(j,X.Enum.STATUS.RECIPIENT,"recipient"),_defineProperty(j,X.Enum.STATUS.INELIGIBLE,"ineligible"),j[w[a.c_Status]]),O=[],U=s[P]||{};U.ID&&"#ID"!=this.props.detailOption&&O.push(React.createElement("div",{key:"ID",className:"whole_match"},"#",this.props.year-2e3,"-",w[a.c_ID]));var L,D=$(w[a.c_First]),F=$(w[a.c_Last]);for(L in U)if(Array.isArray(U[L])){var V=void 0;try{if((V=w[a.c(L)])==ee)continue}catch(e){continue}for(var V=ne[L](V),Y=!0,x=[],B=0,G=U[L].length;B<G;B++){U[L][B][0]!=U[L][B][1]&&x.push(React.createElement("span",{key:B,className:"filtering"},V.substring(U[L][B][0],U[L][B][1])));var H=V.substring(U[L][B][1],B==G-1?V.length:U[L][B+1][0]),Y=H.match(/^[^a-zA-Z\d]*$/)&&Y;x.push(H)}"First"==L?D=x:"Last"==L?F=x:(1<x.length||"string"!=typeof x[0])&&O.push(React.createElement("div",{key:L,className:Y?"whole_match":"partial_match"},x))}var j=[];try{j=(j=w[a.c("Icons")])==ee?[]:j}catch(e){}j.length&&"Icons"==this.props.detailOption&&(j=j.map(function(e){return X.ICONS[e]||null})),T.push(this.props.unbiasedMode?React.createElement("button",{key:this.props.year-2e3+"-"+w[a.c_ID],className:"applicant_row applicant_status_"+M+(!~P||0!=P&&a.rows[i[P-1]][a.c_Status]==a.rows[S][a.c_Status]?"":" br_top")+(!~P||P!=i.length-1&&a.rows[i[P+1]][a.c_Status]==a.rows[S][a.c_Status]?"":" br_bottom")+(~P?"":" hidden"),"data-applicant-id":this.props.year-2e3+"-"+w[a.c_ID],onClick:function(e){return t.onFocusApplicant(e.currentTarget.getAttribute("data-applicant-id"))}},React.createElement("div",{className:"applicant_status"+(U.Status?" filtering":"")},M[0].toUpperCase()),React.createElement("div",{className:"applicant_id"+(e.idIsActive?" filtering":"")},React.createElement("span",null,"#",this.props.year-2e3,"-",w[a.c_ID])),React.createElement("div",{className:"applicant_match spacer"},O),"Icons"==this.props.detailOption||"#ID"==this.props.detailOption?React.createElement("div",{className:"applicant_icons"},j):null):React.createElement("button",{key:this.props.year-2e3+"-"+w[a.c_ID],className:"applicant_row applicant_status_"+M+(!~P||0!=P&&a.rows[i[P-1]][a.c_Status]==a.rows[S][a.c_Status]?"":" br_top")+(!~P||P!=i.length-1&&a.rows[i[P+1]][a.c_Status]==a.rows[S][a.c_Status]?"":" br_bottom")+(~P?"":" hidden"),"data-applicant-id":this.props.year-2e3+"-"+w[a.c_ID],onClick:function(e){return t.props.onFocusApplicant(e.currentTarget.getAttribute("data-applicant-id"))}},React.createElement("div",{className:"applicant_status"+(e.statusIsActive?" filtering":"")},M[0].toUpperCase()),React.createElement("div",{className:"applicant_name"},D," ",F),React.createElement("div",{className:"applicant_match spacer"},O),"#ID"==this.props.detailOption?React.createElement("div",{className:"applicant_id"},React.createElement("span",{className:U.ID?"filtering":""},"#",this.props.year-2e3+"-"+w[a.c_ID])):"Icons"==this.props.detailOption?React.createElement("div",{className:"applicant_icons"},j):null))}return React.createElement(React.Fragment,null,React.createElement("div",{id:"pre_applicant_message",className:n.length?"":"hidden"},n),React.createElement("div",{id:"applicant_table",className:(this.props.compactMode?" compact":"")+(this.props.unbiasedMode?" unbiased":"")},i.length?"":React.createElement("div",{id:"applicant_message"},"No Results"),T),React.createElement("div",{id:"applicant_status_legend"},React.createElement("div",null,React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_applicant"+(e.statusIsActive&&"applicant"==e.status?" filtering":"")},"A"),React.createElement("span",null,"Applicant")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_finalist"+(e.statusIsActive&&"finalist"==e.status?" filtering":"")},"F"),React.createElement("span",null,"Finalist")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_recipient"+(e.statusIsActive&&"recipient"==e.status?" filtering":"")},"R"),React.createElement("span",null,"Recipient")),React.createElement("div",null,React.createElement("div",{className:"applicant_status applicant_status_ineligible"+(e.statusIsActive&&"ineligible"==e.status?" filtering":"")},"I"),React.createElement("span",null,"Ineligible")))))}},{key:"onFocusApplicant",value:function(e){this.props.onFocusApplicant(e)}}]),n}(),_=function(){_inherits(n,React.Component);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),(e=t.call(this,e)).state={edits:{},editing:!1,uploading:!1,pendingRow:null,pendingSheetsRow:null,pendingRowIndex:null,failedUpload:!1,warnUnsavedEdit:!1,activeUnusedIcons:!1},window.addEventListener("keydown",function(e){"Escape"!=e.key&&"Escape"!=e.code||this.onUnfocus()}.bind(_assertThisInitialized(e))),e}return _createClass(n,[{key:"render",value:function(){var e,t,n,a,i,s=this,r=this.props.spreadsheetData,o=this.props.year,l=this.props.id,c=[],u=[],d=[];if(r&&!isNaN(o)){var p=function(e,t){try{var n=y[r.c(e)];return n==ee?t:n}catch(e){return t}},h=function(e){if(e in X[o].eliminators&&"Applicant"==I){var t=p(e,ee);return X[o].eliminators[e](t)}return!1};document.documentElement.setAttribute("data-is-focusing","true");var m,g=[],E=_createForOfIteratorHelper(r.rows);try{for(E.s();!(m=E.n()).done;){var f=m.value;parseInt(f[r.c_ID],16)==l&&g.push(f)}}catch(e){E.e(e)}finally{E.f()}if(1!=g.length)return null;var v,R,y=g[0],_=ne.First(y[r.c_First])+" "+ne.Last(y[r.c_Last]),b=ne.Email(p("Email",ee)),N="#"+(o-2e3)+"-"+y[r.c_ID],I=ne.Status(y[r.c_Status]),A=ne.Income(p("Income",ee)),C=h("Income"),T=ne.Members(p("Members",ee)),S=h("Members"),k=ne.EFC(p("EFC",ee)),w=h("EFC"),P=ne.College(p("College",ee)),M=h("College"),O=ne.Loans(p("Loans",ee)),U=h("Loans"),L=ne.Campus_Living(p("Campus_Living",ee)),D=h("Campus_Living"),F=ne.Parent1_Education(p("Parent1_Education",ee)),V=h("Parent1_Education"),Y=ne.Parent2_Education(p("Parent2_Education",ee)),x=h("Parent2_Education"),B=ne.Location(p("Location",ee)),G=h("Location"),H=ne.Year(p("Year",ee)),j=h("Year");this.props.unbiasedMode?e="(***) ***-****":(e=ne.Phone(p("Phone",ee)),t=h("Phone")),n=this.props.unbiasedMode?"— / — / —":ne.Pronouns(p("Pronouns",ee)),this.props.unbiasedMode?R=(v=p("Birthday",ee))==ee||isNaN(v.valueOf())?"N/A":(R=new Date,v=new Date(v),J=R.getFullYear()-v.getFullYear(),v.setFullYear(R.getFullYear()),"".concat(J-=0<v-R?1:0," year").concat(1==J?"":"s"," old")):(R=ne.Birthday(p("Birthday",ee)),a=h("Birthday"));for(var $=X[this.props.year],z=0,Q=$.prompts.length;z<Q;z++)(function(t){var e=$.mapping.Prompts[t],e=r.headers.indexOf(e);if(!~e)return;c.push(React.createElement("div",{key:t,"data-prompt-index":t,className:"modal_prompt"+(s.state.editing?" editing":"")},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,$.prompts[t])),s.state.editing?React.createElement(ae,{defaultValue:y[e].trim(),onChange:function(e){return s.onEditPrompt(e,t)}}):React.createElement("div",{className:"modal_prompt_response",onInput:function(e){}},y[e].trim())))})(z);(J=p("Comments","").trim()).match(/^[nN]\s*\/?\s*[aA]$/)&&(J="");var W="Icons"in this.state.edits?this.state.edits.Icons:p("Icons",[]),u=W.map(function(e){return X.ICONS[e]||null});if(this.state.editing){for(var d=Object.keys(X.ICONS),Z=W.length-1;0<=Z;Z--){var K=d.indexOf(W[Z]);~K&&d.splice(K,1)}d=d.map(function(e){return X.ICONS[e]||null});for(var q=W.length-1;0<=q;q--)null!==u[q]&&u.splice(q+1,0,React.createElement("button",{key:W[q]+"-deleter",className:"modal_icon_deleter nostyle"},React.createElement("div",null)))}}else document.documentElement.setAttribute("data-is-focusing","false");var h=C||S||w||V||x||M||U||D||G||j||t||a,J=this.state.editing||""!=J?React.createElement("div",{className:"modal_prompt"+(this.state.editing?" editing":"")},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,"Additional Comments")),this.state.editing?React.createElement(ae,{defaultValue:J,onChange:this.onEditComments.bind(this)}):React.createElement("div",{className:"modal_prompt_response",onInput:function(e){}},J)):null;return this.state.uploading?i="Saving Changes...":this.state.failedUpload?i=React.createElement(React.Fragment,null,'The changes you made failed to save. Make sure you have a stable internet connection and "Edit" access on the Google Sheet.',React.createElement("div",{style:{textAlign:"center",marginTop:".5rem"}},React.createElement("button",{onClick:this.onRetryUpload.bind(this)},"Try Again"),React.createElement("button",{className:"destructive",onClick:this.onAbortEdit.bind(this)},"Delete Changes"))):this.state.warnUnsavedEdit&&(i=React.createElement(React.Fragment,null,"You have unsaved changes. Do you want to go back and save them or exit anyway?",React.createElement("div",{style:{textAlign:"center",marginTop:".5em"}},React.createElement("button",{onClick:function(e){return s.setState({warnUnsavedEdit:!1})}},"Go Back"),React.createElement("button",{className:"destructive",onClick:function(e){s.onUnfocus("force")}},"Exit")))),React.createElement("div",{id:"modal_back",onClick:this.onUnfocus.bind(this)},React.createElement("div",{id:"applicant_modal",onClick:this.onClickModal.bind(this)},i?React.createElement("div",{id:"modal_message"},i):null,React.createElement("div",{id:"modal_content"},React.createElement("div",{id:"modal_scroller",onScroll:this.onScroll.bind(this)},this.props.unbiasedMode?React.createElement("h1",null,N):React.createElement("h1",null,this.state.editing?React.createElement("input",{type:"text",defaultValue:_,"data-original-value":_,onChange:this.onEditName.bind(this),onBlur:this.onBlurName.bind(this),pattern:"\\s*[0-9A-Za-zÀ-ÖØ-öø-ÿ]+\\s+[0-9A-Za-zÀ-ÖØ-öø-ÿ]+(?:\\s+[0-9A-Za-zÀ-ÖØ-öø-ÿ]+)*\\s*"}):_),this.props.unbiasedMode?null:React.createElement("h2",null,this.state.editing?React.createElement("input",{type:"email",defaultValue:b,"data-original-value":b,onChange:this.onEditEmail.bind(this),onBlur:this.onBlurField.bind(this,"Email")}):b," ",React.createElement("span",null,N)),React.createElement("h3",null,this.state.editing?React.createElement("select",{defaultValue:I,onChange:this.onEditStatus.bind(this)},React.createElement("option",null,"Applicant"),React.createElement("option",null,"Finalist"),React.createElement("option",null,"Recipient"),React.createElement("option",null,"Ineligible")):I),React.createElement("div",{className:"modal_icons"+(this.state.editing?" editing":u.length?"":" hidden"),onClick:this.onDeleteIcon.bind(this)},u,this.state.editing&&d.length?React.createElement("svg",{className:"modal_icon add_icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",onClick:function(e){return s.state.activeUnusedIcons?null:(e.stopPropagation(),s.setState({activeUnusedIcons:!0}))}},React.createElement("title",null,"Add another"),React.createElement("path",{d:"M10,40,40,40,40,10,60,10,60,40,90,40,90,60,60,60,60,90,40,90,40,60,10,60Z"})):null),this.state.editing?React.createElement("div",{className:"modal_unused_icons"+(this.state.activeUnusedIcons?"":" hidden"),onClick:this.onAddIcon.bind(this)},React.createElement("div",null,d)):null,h&&te&&!this.state.editing?React.createElement("button",{className:"destructive",onClick:function(e){return s.setState({edits:{Status:X.Enum.STATUS.INELIGIBLE}},s.onEndEdit.bind(s))}},"Make Ineligible"):null,React.createElement("section",{className:"modal_section"},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,"Financial Info")),React.createElement("div",{className:"modal_row"},React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing?React.createElement("input",{type:"text",defaultValue:A,"data-original-value":A,onChange:this.onEditIncome.bind(this),onBlur:this.onBlurField.bind(this,"Income"),pattern:"\\s*(?:\\$?\\s*\\d+(?:[,\\s]\\d*)*\\s*(?:\\.\\s*\\d*(?:\\s\\d*)*)?(?:\\s*[kK])?(?:\\s*\\+|\\s*[-–]\\s*\\$?\\s*\\d+(?:[,\\s]\\d*)*\\s*(?:\\.\\s*\\d*(?:\\s\\d*)*)?(?:\\s*[kK])?)?|[nN]\\s*\\/?\\s*[aA])\\s*"}):React.createElement("span",{className:C?"eliminable":""},A),React.createElement("span",null,"Household Income")),React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing?React.createElement("input",{type:"text",defaultValue:T,"data-original-value":T,onChange:this.onEditHouseholdMembers.bind(this),onBlur:this.onBlurField.bind(this,"Members"),pattern:"\\s*(?:\\d+(?:[,\\s]\\d*)*\\s*(?:\\.\\s*\\d*(?:\\s\\d*)*)?(?:\\s*[kK])?|[nN]\\s*\\/?\\s*[aA])\\s*"}):React.createElement("span",{className:S?"eliminable":""},T),React.createElement("span",null,"Household Members")),React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing?React.createElement("input",{type:"text",defaultValue:k,"data-original-value":k,onChange:this.onEditEFC.bind(this),onBlur:this.onBlurField.bind(this,"EFC"),pattern:"\\s*(?:\\$?\\s*\\d+(?:[,\\s]\\d*)*\\s*(?:\\.\\s*\\d*(?:\\s\\d*)*)?(?:\\s*[kK])?|[nN]\\s*\\/?\\s*[aA])\\s*"}):React.createElement("span",{className:w?"eliminable":""},k),React.createElement("span",null,"EFC")))),React.createElement("section",{className:"modal_section"},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,"College Info")),React.createElement("div",{className:"modal_row"},React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("input",{type:"text",defaultValue:P,"data-original-value":P,onChange:this.onEditCollege.bind(this),onBlur:this.onBlurField.bind(this,"College")}):React.createElement("span",{className:M?"eliminable":""},P),React.createElement("span",null,"College")),React.createElement("div",{className:"field",style:{width:"5rem"}},this.state.editing?React.createElement("select",{defaultValue:O,onChange:this.onEditLoans.bind(this)},React.createElement("option",null,"Yes"),React.createElement("option",null,"No"),React.createElement("option",null,"N/A")):React.createElement("span",{className:U?"eliminable":""},O),React.createElement("span",null,"Loans")),React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("select",{defaultValue:L,onChange:this.onEditCampusLiving.bind(this)},React.createElement("option",null,"On campus"),React.createElement("option",null,"Off campus w/ rent"),React.createElement("option",null,"Off campus w/o rent"),React.createElement("option",null,"Unknown"),React.createElement("option",null,"N/A")):React.createElement("span",{className:D?"eliminable":""},L),React.createElement("span",null,"Campus Living")))),React.createElement("section",{className:"modal_section"},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,"Background")),React.createElement("div",{className:"modal_row"},React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("input",{type:"text",defaultValue:B,"data-original-value":B,onChange:this.onEditLocation.bind(this),onBlur:this.onBlurField.bind(this,"Location")}):React.createElement("span",{className:G?"eliminable":""},B),React.createElement("span",null,"Location")),React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("select",{defaultValue:H,onChange:this.onEditYear.bind(this)},React.createElement("option",null,"High school student"),React.createElement("option",null,"First year college student"),React.createElement("option",null,"Returning college student"),React.createElement("option",null,"Graduate student"),React.createElement("option",null,"Transfer student"),React.createElement("option",null,"N/A")):React.createElement("span",{className:j?"eliminable":""},H),React.createElement("span",null,"Year"))),React.createElement("div",{className:"modal_row"},React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("select",{defaultValue:F,onChange:this.onEditPar1Education.bind(this)},React.createElement("option",null,"No diploma"),React.createElement("option",null,"HS diploma or equivalent"),React.createElement("option",null,"Some college"),React.createElement("option",null,"College degree"),React.createElement("option",null,"Multiple degrees"),React.createElement("option",null,"No parent 1")):React.createElement("span",{className:V?"eliminable":""},F),React.createElement("span",null,"Parent 1 Education")),React.createElement("div",{className:"field",style:{width:"18rem"}},this.state.editing?React.createElement("select",{defaultValue:Y,onChange:this.onEditPar2Education.bind(this)},React.createElement("option",null,"No diploma"),React.createElement("option",null,"HS diploma or equivalent"),React.createElement("option",null,"Some college"),React.createElement("option",null,"College degree"),React.createElement("option",null,"Multiple degrees"),React.createElement("option",null,"No parent 2")):React.createElement("span",{className:x?"eliminable":""},Y),React.createElement("span",null,"Parent 2 Education")))),React.createElement("section",{className:"modal_section"},React.createElement("h4",{className:"modal_header"},React.createElement("span",null,"Personal Info")),React.createElement("div",{className:"modal_row"},React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing&&!this.props.unbiasedMode?React.createElement("input",{type:"text",defaultValue:R,"data-original-value":R,onChange:this.onEditBirthday.bind(this),onBlur:this.onBlurField.bind(this,"Birthday")}):React.createElement("span",{className:a?"eliminable":""},R),React.createElement("span",null,"Birthday")),React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing&&!this.props.unbiasedMode?React.createElement("input",{type:"tel",defaultValue:e,"data-original-value":e,onChange:this.onEditPhoneNumber.bind(this),onBlur:this.onBlurField.bind(this,"Phone"),pattern:"\\s*(?:(?:\\+\\s*1\\s*)?(?:\\(\\s*\\d\\s*\\d\\s*\\d\\s*\\)|\\d\\s*\\d\\s*\\d)\\s*(?:-\\s*)?\\d\\s*\\d\\s*\\d\\s*(?:-\\s*)?\\d\\s*\\d\\s*\\d\\s*\\d|[nN]\\s*\\/?\\s*[aA])\\s*"}):React.createElement("span",{className:t?"eliminable":""},e),React.createElement("span",null,"Phone Number")),React.createElement("div",{className:"field",style:{width:"15rem"}},this.state.editing&&!this.props.unbiasedMode?React.createElement("input",{type:"text",defaultValue:n,"data-original-value":n,onChange:this.onEditPronouns.bind(this),onBlur:this.onBlurField.bind(this,"Pronouns")}):React.createElement("span",null,n),React.createElement("span",null,"Pronouns")))),c,J),React.createElement("div",{id:"modal_btn_container"},this.state.editing?React.createElement("button",{onClick:this.onEndEdit.bind(this)},"Save"):null,this.state.editing?React.createElement("button",{className:"destructive",onClick:this.onAbortEdit.bind(this)},"Cancel"):null,te&&!this.state.editing?React.createElement("button",{onClick:this.onStartEdit.bind(this)},"Edit"):null,this.state.editing?null:React.createElement("button",{onClick:this.onUnfocus.bind(this)},"Close")))))}},{key:"onScroll",value:function(e){var t=e.currentTarget,n=t.scrollTop,e=t.scrollHeight-t.scrollTop-t.clientHeight;t.style.boxShadow="0 1.2em 0.25em -1em rgba(0,0,0,".concat(Math.min(n/16*.4,.4),") inset, 0 -1.2em 0.25em -1em rgba(0,0,0,").concat(Math.min(e/16*.4,.4),") inset")}},{key:"onClickModal",value:function(e){e.stopPropagation(),this.state.activeUnusedIcons&&this.setState({activeUnusedIcons:!1})}},{key:"onUnfocus",value:function(e){this.props.active&&(this.state.editing&&0!=Object.keys(this.state.edits).length&&"force"!=e?this.setState({warnUnsavedEdit:!0}):(this.onAbortEdit(e),this.props.onUnfocus()))}},{key:"onStartEdit",value:function(e){e&&e.currentTarget.disabled||this.setState({editing:!0})}},{key:"onAbortEdit",value:function(e){this.setState({editing:!1,edits:{},uploading:!1,pendingRow:null,pendingSheetsRow:null,pendingRowIndex:null,failedUpload:!1,warnUnsavedEdit:!1})}},{key:"onRetryUpload",value:function(e){"number"==typeof this.state.pendingRowIndex&&this.state.pendingSheetsRow&&(gapi.client.sheets.spreadsheets.values.update({spreadsheetId:X[this.props.year].id,range:"'".concat(X[this.props.year].sheet,"'!").concat(this.state.pendingRowIndex+2,":").concat(this.state.pendingRowIndex+2),valueInputOption:"RAW"},{values:[this.state.pendingSheetsRow]}).then(function(){this.props.spreadsheetData.rows[this.state.pendingRowIndex]=this.state.pendingRow,this.setState({uploading:!1,pendingRow:null,pendingSheetsRow:null,pendingRowIndex:null})}.bind(this),function(e){this.setState({uploading:!1,failedUpload:!0})}.bind(this)),this.setState({uploading:!0,failedUpload:!1}))}},{key:"onEndEdit",value:function(){if(this.props.spreadsheetData&&this.props.year&&this.props.id&&0!=Object.keys(this.state.edits).length){var e,t=this.props.spreadsheetData,n=t.rows[this.props.applicantRowIndex].slice();for(e in this.state.edits)if("Prompts"==e)for(var a in this.state.edits.Prompts){var i=t.headers.indexOf(X[this.props.year].mapping.Prompts[a]);~i&&(n[i]=this.state.edits.Prompts[a])}else{var s=void 0;try{s=t.c(e)}catch(e){continue}n[s]=this.state.edits[e]}var r,o=X[this.props.year].translate.to,l=n.slice();for(r in o){var c=void 0;try{c=t.c(r)}catch(e){continue}var u=o[r](n[c]);l[c]=u}gapi.client.sheets.spreadsheets.values.update({spreadsheetId:X[this.props.year].id,range:"'".concat(X[this.props.year].sheet,"'!").concat(this.props.applicantRowIndex+2,":").concat(this.props.applicantRowIndex+2),valueInputOption:"RAW"},{values:[l]}).then(function(){this.props.spreadsheetData.rows[this.state.pendingRowIndex]=this.state.pendingRow,this.setState({uploading:!1,pendingRow:null,pendingSheetsRow:null,pendingRowIndex:null})}.bind(this),function(e){this.setState({uploading:!1,failedUpload:!0})}.bind(this)),this.setState({editing:!1,edits:{},uploading:!0,failedUpload:!1,pendingRow:n,pendingSheetsRow:l,pendingRowIndex:this.props.applicantRowIndex})}else this.setState({editing:!1,edits:{},uploading:!1,pendingRow:null,pendingSheetsRow:null,pendingRowIndex:null,failedUpload:!1})}},{key:"onMakeEdit",value:function(e,t){"Prompt"==e.substring(0,6)?(this.state.edits.Prompts=this.state.edits.Prompts||{},this.state.edits.Prompts[+e.substring(6)]=t):this.state.edits[e]=t}},{key:"onRemoveEdit",value:function(e){"Prompt"==e.substring(0,6)?(this.state.edits.Prompts=this.state.edits.Prompts||{},delete this.state.edits.Prompts[+e.substring(6)],0==Object.keys(this.state.edits.Prompts).length&&delete this.state.edits.Prompts):delete this.state.edits[e]}},{key:"onBlurField",value:function(e,t){var n=this.state.edits[e];t.currentTarget.value=n?ne[e](n):t.currentTarget.getAttribute("data-original-value")}},{key:"onAddIcon",value:function(e){e.stopPropagation();for(var t,n,a=e.target;a!=e.currentTarget&&!(t=a.getAttribute("data-icon-name"));)a=a.parentNode;if(t){if("Icons"in this.state.edits)n=this.state.edits.Icons;else{var i,s=this.props.spreadsheetData;try{i=s.c("Icons")}catch(e){return}n=s.rows[this.props.applicantRowIndex][i].slice()}~n.indexOf(t)||(n.push(t),n.length==Object.keys(X.ICONS).length&&this.setState({activeUnusedIcons:!1}),this.onMakeEdit("Icons",n),this.forceUpdate())}}},{key:"onDeleteIcon",value:function(e){for(var t,n,a=e.target;a!=e.currentTarget&&!(t=a.getAttribute("data-icon-name")||a.previousElementSibling.getAttribute("data-icon-name"));)a=a.parentNode;if(t){if(e.stopPropagation(),"Icons"in this.state.edits)n=this.state.edits.Icons;else{var i=this.props.spreadsheetData;try{s=i.c("Icons")}catch(e){return}n=i.rows[this.props.applicantRowIndex][s].slice()}var s=n.indexOf(t);~s&&(n.splice(s,1),this.onMakeEdit("Icons",n),this.forceUpdate())}}},{key:"onEditStatus",value:function(e){this.onMakeEdit("Status",{Ineligible:X.Enum.STATUS.INELIGIBLE,Applicant:X.Enum.STATUS.APPLICANT,Finalist:X.Enum.STATUS.FINALIST,Recipient:X.Enum.STATUS.RECIPIENT}[e.currentTarget.value]||ee)}},{key:"onEditName",value:function(e){var t=$(e.currentTarget.value.trim()).split(/\s+/);1!=t.length&&e.currentTarget.checkValidity()?(this.onMakeEdit("First",ne.First(t[0])),this.onMakeEdit("Last",ne.Last(t.slice(1).join(" ")))):(this.onRemoveEdit("First"),this.onRemoveEdit("Last"))}},{key:"onBlurName",value:function(e){var t=this.state.edits.First,n=this.state.edits.Last;e.currentTarget.value=t&&n?ne.First(t)+" "+ne.Last(n):e.currentTarget.getAttribute("data-original-value")}},{key:"onEditEmail",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()&&t?this.onMakeEdit("Email",ne.Email(t)):this.onRemoveEdit("Email")}},{key:"onEditEFC",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("EFC",ee):("k"==(t=t.replace(/[,\s\$]/g,"").toLowerCase())[t.length-1]&&(t=1e3*t.substring(0,t.length-1)),this.onMakeEdit("EFC",Math.floor(t))):this.onRemoveEdit("EFC")}},{key:"onEditHouseholdMembers",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\/?[aA]$/)||!t?this.onMakeEdit("Members",ee):("k"==(t=t.replace(/[,\s]/g,"").toLowerCase())[t.length-1]&&(t=1e3*t.substring(0,t.length-1)),this.onMakeEdit("Members",Math.floor(t))):this.onRemoveEdit("Members")}},{key:"onEditIncome",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("Income",ee):1==(t=(t=t.replace(/[,\s\$]/g,"").toLowerCase()).split(/[-–]/)).length?"+"==(t=t[0])[t.length-1]?("k"==(t=t.substring(0,t.length-1))[t.length-1]&&(t=1e3*t.substring(0,t.length-1)),this.onMakeEdit("Income",[Math.floor(t),1/0])):("k"==t[t.length-1]&&(t=1e3*t.substring(0,t.length-1)),this.onMakeEdit("Income",Math.floor(t))):("k"==t[0][t[0].length-1]&&(t[0]=1e3*t[0].substring(0,t[0].length-1)),"k"==t[1][t[1].length-1]&&(t[1]=1e3*t[1].substring(0,t[1].length-1)),this.onMakeEdit("Income",[Math.floor(t[0]),Math.floor(t[1])])):this.onRemoveEdit("Income")}},{key:"onEditCollege",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("College",ee):this.onMakeEdit("College",ne.College(t)):this.onRemoveEdit("College")}},{key:"onEditLoans",value:function(e){this.onMakeEdit("Loans",{Yes:X.Enum.LOANS.YES,No:X.Enum.LOANS.NO,"N/A":ee}[e.currentTarget.value]||ee)}},{key:"onEditCampusLiving",value:function(e){this.onMakeEdit("Campus_Living",{"On campus":X.Enum.CAMPUS_LIVING.ON_CAMPUS,"Off campus w/ rent":X.Enum.CAMPUS_LIVING.OFF_CAMPUS_RENT,"Off campus w/o rent":X.Enum.CAMPUS_LIVING.OFF_CAMPUS_NO_RENT,Unknown:X.Enum.CAMPUS_LIVING.UNKNOWN,"N/A":ee}[e.currentTarget.value]||ee)}},{key:"onEditLocation",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("Location",ee):this.onMakeEdit("Location",ne.Location(t)):this.onRemoveEdit("Location")}},{key:"onEditYear",value:function(e){this.onMakeEdit("Year",{"High school student":X.Enum.YEAR.HIGH_SCHOOL,"First year college student":X.Enum.YEAR.FIRST_YEAR,"Returning college student":X.Enum.YEAR.COLLEGE,"Graduate Student":X.Enum.YEAR.GRADUATE,"Transfer Student":X.Enum.YEAR.TRANSFER,"N/A":ee}[e.currentTarget.value]||ee)}},{key:"onEditPar1Education",value:function(e){this.onMakeEdit("Parent1_Education",{"No HS diploma":X.Enum.PARENT1_EDUCATION.NO_DIPLOMA,"HS diploma or equivalent":X.Enum.PARENT1_EDUCATION.DIPLOMA,"Some college":X.Enum.PARENT1_EDUCATION.SOME_COLLEGE,"College degree":X.Enum.PARENT1_EDUCATION.DEGREE,"Multiple degrees":X.Enum.PARENT1_EDUCATION.MULTIPLE_DEGREES,"No parent 1":X.Enum.PARENT2_EDUCATION.NO_PARENT,"N/A":ee}[e.currentTarget.value]||ee)}},{key:"onEditPar2Education",value:function(e){this.onMakeEdit("Parent2_Education",{"No HS diploma":X.Enum.PARENT2_EDUCATION.NO_DIPLOMA,"HS diploma or equivalent":X.Enum.PARENT2_EDUCATION.DIPLOMA,"Some college":X.Enum.PARENT2_EDUCATION.SOME_COLLEGE,"College degree":X.Enum.PARENT2_EDUCATION.DEGREE,"Multiple degrees":X.Enum.PARENT2_EDUCATION.MULTIPLE_DEGREES,"No parent 2":X.Enum.PARENT2_EDUCATION.NO_PARENT,"N/A":ee}[e.currentTarget.value]||ee)}},{key:"onEditBirthday",value:function(e){var t=e.currentTarget.value.trim().toLowerCase();if(e.currentTarget.checkValidity())if(t.match(/^[nN]\s*\/?\s*[aA]$/)||!t)this.onMakeEdit("Birthday",ee);else{var n,a,i,s,r,o,l=new Date;(n=t.match(/(\d+)\s*[\/\.-]\s*(\d+)\s*[\/\.-]\s*(\d+)/))?(u=+n[1],r=+n[2],a=+n[3],i=l.getFullYear(),s=100*Math.floor(i/100),a<100&&(a<i%100||!(i%100<a)&&(u<l.getMonth()+1||!(u>l.getMonth()+1)&&r<l.getDate())?a+=s:a+=s-100),12<u&&r<=12&&(u=(o=[r,u])[0],r=o[1])):(n=t.match(/^([a-z]+)\s*(?:\.\s*)?(\d{1,2})\s*(?:,\s*)?(\d{4})$/))&&(u=1==(t=(o=["january","february","march","april","may","june","july","august","september","october","november","december"]).filter(function(e){return 0==e.indexOf(n[1])})).length?o.indexOf(t[0])+1:0,r=+n[2],a=+n[3]);var c=a%400==0||a%4==0&&a%100!=0;switch(u){case 0:case 2:case 4:case 6:case 7:case 9:case 11:r=r<=31?r:0;break;case 3:case 5:case 8:case 10:break;case 1:r=r<=(c?29:28)?r:0}if(0<u&&u<=12&&0!=r){var u=new Date(a,u-1,r);if(u.valueOf())return this.onMakeEdit("Birthday",u),void e.currentTarget.removeAttribute("aria-invalid")}this.onRemoveEdit("Birthday",ee),e.currentTarget.setAttribute("aria-invalid","")}else this.onRemoveEdit("Birthday")}},{key:"onEditPhoneNumber",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("Phone",ee):this.onMakeEdit("Phone",ne.Phone(t)):this.onRemoveEdit("Phone")}},{key:"onEditPronouns",value:function(e){var t=e.currentTarget.value.trim();e.currentTarget.checkValidity()?t.match(/^[nN]\s*\/?\s*[aA]$/)||!t?this.onMakeEdit("Pronouns",ee):this.onMakeEdit("Pronouns",ne.Pronouns(t)):this.onRemoveEdit("Pronouns")}},{key:"onEditPrompt",value:function(e,t){e.currentTarget.checkValidity()?this.onMakeEdit("Prompt"+t,e.currentTarget.value.trim()):this.onRemoveEdit("Prompt"+t)}},{key:"onEditComments",value:function(e){e.currentTarget.checkValidity()?this.onMakeEdit("Comments",e.currentTarget.value.trim()):this.onRemoveEdit("Comments")}}]),n}(),ae=function(){_inherits(a,React.Component);var n=_createSuper(a);function a(e){var t;return _classCallCheck(this,a),(t=n.call(this,e)).state={value:e.defaultValue||"",ref:React.createRef()},t.onChange=t.props.onChange?t.props.onChange.bind(_assertThisInitialized(t)):function(){},t.oldValue=e.defaultValue||"",t}return _createClass(a,[{key:"render",value:function(){return React.createElement("textarea",{ref:this.state.ref,value:this.state.value,onInput:this.onNewValue.bind(this),rows:"1"})}},{key:"componentDidMount",value:function(){this.onNewValue(!1)}},{key:"onNewValue",value:function(e){var t=this.state.ref.current;this.setState({value:t.value});var n=getComputedStyle(t);t.style.height="",t.style.height=t.scrollHeight+parseFloat(n.borderBottomWidth)+"px",e&&this.oldValue!=t.value&&(this.onChange(e),this.oldValue=t.value)}}]),a}(),b=[];for(p in X)isNaN(p)||b.push(p);b.sort(),user.logIn.then(function(){ReactDOM.render(React.createElement(f,{years:b}),document.getElementById("content"))}),gapiLoaded.catch(function(){document.getElementById("content").style.display="none",document.getElementById("gapi-failed").style.display="flex",document.getElementById("page-reload").addEventListener("click",location.reload.bind(location))})}();