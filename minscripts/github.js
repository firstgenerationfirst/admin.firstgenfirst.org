"use strict";window.github=function(){var d={user:null,auth_code:null,logIn:new Promise(function(n,o){var t={};if(document.cookie)for(var e=document.cookie.split(";"),s=e.length-1;0<=s;s--)e[s]=e[s].split("="),t[decodeURIComponent(e[s].shift().trim())]=decodeURIComponent(e[s].join("=").trim());var r,i={};if(location.search)for(var a=location.search.substring(1).split("&"),u=a.length-1;0<=u;u--)a[u]=a[u].split("="),i[a[u][0]]=a[u][1];i.code||t["gh-sid"]?(history.pushState("","",location.pathname),document.documentElement.setAttribute("data-gh-loading",""),(r=new XMLHttpRequest).open("POST","https://us-west2-first-gen-first-admin-site.cloudfunctions.net/gh-access-token"),r.setRequestHeader("Content-Type","application/json"),r.addEventListener("readystatechange",function(){var t,e;4==this.readyState&&(document.documentElement.setAttribute("data-github-log-in-attempted",""),200==this.status?(t=JSON.parse(this.response),d.auth_code=t.token,(e=new Date).setYear(e.getFullYear()+10),document.cookie="gh-sid=".concat(t.session_id,";expires=").concat(e.toUTCString()),document.documentElement.setAttribute("data-github-logged-in",""),d.get("/user").then(function(t){window.github.user=t,d.get("/repos/{owner}/{repo}/collaborators/{username}/permission",{owner:"firstgenerationfirst",repo:"firstgenfirst.org",username:t.login}).then(function(t){document.documentElement.removeAttribute("data-gh-loading"),"admin"==t.permission||"write"==t.permission?n():(document.documentElement.setAttribute("data-github-no-write",""),o({response:"No write access.",status:401}))}).catch(function(t){document.documentElement.removeAttribute("data-gh-loading"),document.documentElement.setAttribute("data-github-error",""),t.constructor==Object?o(t):o({response:t.toString(),status:500})})}).catch(function(t){document.documentElement.removeAttribute("data-gh-loading"),document.documentElement.setAttribute("data-github-error",""),t.contructor==Object?o(t):o({response:t.toString(),status:500})})):("The provided session ID does not exist."==this.response&&(document.cookie="gh-sid=;expires=Thu, 01 Jan 1970 00:00:00 GMT"),document.documentElement.removeAttribute("data-gh-loading"),document.documentElement.setAttribute("data-github-error",""),o({response:this.response,status:this.status})))}),r.send(JSON.stringify({code:i.code||void 0,sid:t["gh-sid"]||void 0}))):(document.documentElement.setAttribute("data-no-github",""),o({response:"No GitHub login information.",status:400}))}),get:function(a,u){return new Promise(function(t,e){if(u)for(var n=0,o=Object.keys(u);n<o.length;n++)for(var s=o[n];;){var r=a.replace("{"+s+"}",u[s]);if(r==a)break;a=r}var i=new XMLHttpRequest;i.open("GET","https://api.github.com"+a),i.setRequestHeader("Accept","application/vnd.github.v3+json"),i.setRequestHeader("Authorization","token "+d.auth_code),i.addEventListener("readystatechange",function(){this.readyState==this.DONE&&(2==Math.floor(this.status/100)?t(JSON.parse(this.response)):e({response:this.response,status:this.status}))}),i.send()})},put:function(u,c){return new Promise(function(t,e){if(c)for(var n=0,o=Object.keys(c);n<o.length;n++)for(var s=o[n],r=!1;;){var i=u.replace("{"+s+"}",c[s]);if(i==u){r&&delete c[s];break}r=!0,u=i}var a=new XMLHttpRequest;a.open("PUT","https://api.github.com"+u),a.setRequestHeader("Accept","application/vnd.github.v3+json"),a.setRequestHeader("Authorization","token "+d.auth_code),a.addEventListener("readystatechange",function(){this.readyState==this.DONE&&(2==Math.floor(this.status/100)?t(JSON.parse(this.response)):e({response:this.response,status:this.status}))}),a.send(JSON.stringify(c))})},file:{read:function(t){return d.get("/repos/{owner}/{repo}/contents/{path}",{owner:"firstgenerationfirst",repo:"firstgenfirst.org",path:t})},write:function(e,n,o,t,s){var r={owner:"firstgenerationfirst",repo:"firstgenfirst.org",path:e,message:o,content:btoa(unescape(encodeURIComponent(n)))};return t==d.getSHA?d.file.read(e).then(function(t){return d.put(e,n,o,t.sha,s)}):(t&&(r.sha=t),s&&(r.branch=s),d.put("/repos/{owner}/{repo}/contents/{path}",r))}},getSHA:Symbol()};return d}();