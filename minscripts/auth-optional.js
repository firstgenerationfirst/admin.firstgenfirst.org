"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){var e=function(){function a(e){function t(e,t){this.value=t,this.status=e,this._settle()}_classCallCheck(this,a),_defineProperty(this,"status",null),_defineProperty(this,"value",null),_defineProperty(this,"_handlers",[]),this.status="pending",setTimeout(function(){try{e(t.bind(this,"resolved"),t.bind(this,"rejected"))}catch(e){t.call(this,"rejected",e)}}.bind(this),0)}return _createClass(a,[{key:"then",value:function(e,t){return this._addHandlers(e,t,!0)}},{key:"catch",value:function(e){return this._addHandlers(void 0,e,!0)}},{key:"finally",value:function(e){return this._addHandlers(e,e,!1)}},{key:"_addHandlers",value:function(e,t,n){"function"!=typeof e&&(e=function(e){return e}),"function"!=typeof t&&(t=function(e){return e});var i=new a(function(){});if(this._handlers.push([n,e,t,i]),"pending"!=this.status)try{var o="resolved"==this.status?e:t;i.value=n?o(this.value):o(),i.status="resolved"}catch(e){i.value=e,i.status="rejected"}finally{i._settle()}return i}},{key:"_settle",value:function(){if("pending"!=this.status)for(var e=0,t=this._handlers.length;e<t;e++){var n=this._handlers[e][3];try{var i=this._handlers[e]["resolved"==this.status?1:2];this._handlers[e][0]?n.value=i(this.value):n.value=i(),n.status="resolved"}catch(e){n.value=e,n.status="rejected"}finally{n._settle()}}}}]),a}();window.user={online:!1,uid:null,email:null,firebaseUser:null,profile:null,readProfile:null},firebase.initializeApp({apiKey:"AIzaSyBLZkeVHg1qYygChbI9dEltdCm3UKF93X8",authDomain:"first-gen-first-admin-site.firebaseapp.com",databaseURL:"https://first-gen-first-admin-site.firebaseio.com",projectId:"first-gen-first-admin-site",storageBucket:"first-gen-first-admin-site.appspot.com",messagingSenderId:"544519717939",appId:"1:544519717939:web:154ab2d776fda1271f8f46"}),window.gapiLoaded=new Promise(function(t,n){var e=document.getElementById("gapi-script"),i=!1;function o(){i||"object"!=("undefined"==typeof gapi?"undefined":_typeof(gapi))||(i=!0,gapi.load("client:auth2",{callback:function(){var e=setTimeout(function(){(gapi.auth2.getAuthInstance()?t:n)()},8e3);gapi.client.init({apiKey:"AIzaSyBLZkeVHg1qYygChbI9dEltdCm3UKF93X8",clientId:"544519717939-mljfuqt4cd6it8on67gmptrnv964171e.apps.googleusercontent.com",discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"],scope:"profile https://www.googleapis.com/auth/spreadsheets"}).then(function(){clearTimeout(e),t()},function(){clearTimeout(e),n()})},onerror:n,timeout:5e3,ontimeout:n}))}e.addEventListener("load",o),e.addEventListener("error",n),o()}),window.user.logIn=new e(function(i,e){gapiLoaded.then(function(){var t=gapi.auth2.getAuthInstance();function n(){var e=t.currentUser.get().getAuthResponse();firebase.auth().signInWithCredential(firebase.auth.GoogleAuthProvider.credential(e.id_token,e.access_token)).then(function(e){window.user.online=!0,window.user.uid=e.user.uid,window.user.email=e.user.email,window.user.firebaseUser=e.user,i(window.user)})}t.isSignedIn.listen(function(e){e&&n()}),t.isSignedIn.get()&&n()})}),window.user.logOut=new e(function(t,e){gapiLoaded.then(function(){var e=gapi.auth2.getAuthInstance();e.isSignedIn.listen(function(e){e||t()}),e.isSignedIn.get()||t()})}),window.user.readProfile=new e(function(t,n){window.user.logIn.then(function(){firebase.firestore().collection("profiles").doc(window.user.uid).get().then(function(e){e=e.data();window.user.profile=e,t(e)}).catch(function(e){"/unauthorized"!=location.pathname&&"/requestacct"!=location.pathname&&location.assign("/unauthorized"),n()})}).catch(function(e){location.assign("/errlogin"),n(e)})}),document.documentElement.setAttribute("data-goog-logged-in","pending"),document.documentElement.setAttribute("data-fb-logged-in","pending"),user.logIn.then(function(){document.documentElement.setAttribute("data-goog-logged-in","true")}),user.logOut.then(function(){document.documentElement.setAttribute("data-goog-logged-in","false"),document.documentElement.setAttribute("data-fb-logged-in","false")}),user.readProfile.then(function(e){document.documentElement.setAttribute("data-fb-logged-in","true")},function(){document.documentElement.setAttribute("data-fb-logged-in","false")})}();